---
title: Рекомендации по использованию средства упаковки MSIX
description: В статье описано, как повторно упаковывать приложения в формате MSIX с помощью средства упаковки MSIX.
ms.date: 09/07/2018
ms.topic: article
keywords: windows 10, uwp, msix
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: a22f4cbc2f96746fea48cb1bca1199e6006f938b
ms.sourcegitcommit: 536d6969cde057877ecdd8345cfb0dc12c9582f2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/07/2020
ms.locfileid: "78909612"
---
# <a name="best-practices-for-the-msix-packaging-tool"></a>Рекомендации по использованию средства упаковки MSIX

<div class="nextstepaction"><p><a class="x-hidden-focus" href="https://www.microsoft.com/en-us/p/msix-packaging-tool/9n5lw3jbcxkf" data-linktype="external">Получить средство упаковки MSIX</a></p></div>

Если вы еще не настроили среду для преобразования, вы можете следовать рекомендациям по работе с нашей [средой](prepare-your-environment.md) , а затем вернуться сюда, чтобы настроить средство упаковки MSIX. Прежде чем приступать к преобразованию, мы рекомендуем настроить параметры в средстве упаковки MSIX, чтобы упростить рабочий процесс каждый раз.

### <a name="tool-defaults"></a>Параметры по умолчанию для инструментов

- **Создание командной строки с каждым пакетом** Этот параметр сделает так, чтобы автоматически создавался файл шаблона командной строки, чтобы при повторном упаковке того же приложения (например, новой версии) в командной строке можно было настроить предварительно настроенный файл шаблона командной строки для этого приложения. Чтобы создать файл шаблона во время рабочего процесса, необходимо предоставить установщик.
- **По умолчанию выбрать все исправления для подготовки компьютера** Этот параметр позволяет выбрать предварительно выбранные исправления, чтобы на этапе подготовки компьютера можно было просто отключить все, не выполняя выбор по отдельности.
- **Принудительное соблюдение требований к версии Microsoft Store** Если вы планируете развертывать приложение с помощью Microsoft Store, следует убедиться, что оно соответствует требованиям к магазину (это повлияет на требования к версии пакета и минимальную поддержку версий ОС). Если этот параметр не установлен, для пакета будет установлена минимальная версия Windows 10 1709, и вы получите полный контроль над 4 цифрами версии пакета. Если этот флажок установлен, для пакета будет установлена минимальная версия Windows 10 1809, а версия должна заканчиваться на. 0 (например, 1.5.6.0).
- **Добавление целостности пакета при создании пакета** Если выбран этот параметр, целостность пакетов будет автоматически добавлена во все создаваемые пакеты. [Целостность пакетов](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-uap10-packageintegrity) поддерживается в Windows 10 2004 и более поздних версиях.
- **Расположение сохранения по умолчанию** Укажите место сохранения по умолчанию, в котором будут сохраняться созданные пакеты и связанные файлы.
- **Расположение программы установки по умолчанию** Укажите расположение по умолчанию, в котором нужно найти установщики для преобразования.
- **Номер порта сервера** Укажите номер порта сервера для инструмента упаковки MSIX. Это уместно, если вы планируете преобразовать с помощью [удаленного компьютера](remote-conversion-setup.md). 
- **Предпочтения среды** Укажите среду по умолчанию для каждого преобразования.
- **Параметры подписывания** Укажите параметр по умолчанию для подписывания при преобразовании приложений. Для установки необходимо подписать пакет MSIX. Вы можете выбрать один из нескольких вариантов подписывания.
    - Подпишитесь с помощью подписи Device Guard. Этот вариант рекомендуется, если у вас нет доверенного сертификата на предприятии. Перед выбором этого параметра необходимо выполнить некоторые действия по включению [подписи Device Guard](../package/signing-package-device-guard-signing.md) . 
    - Подпишитесь с помощью сертификата (PFX). Этот вариант рекомендуется, если у вас уже есть доверенный сертификат, который используется в вашей организации.
    - Укажите CER-файл (не подписывается). Если вы не хотите подписываться во время преобразования, но хотите убедиться, что сведения об издателе будут действительны во время подписания, можно выбрать этот параметр.
    - Не подписывать пакет. — Если вы хотите подписать пакет с помощью другого метода или позже после создания пакета, можно выбрать этот параметр.
    Кроме того, рекомендуется добавить URL-адрес сервера меток времени к параметрам подписывания (если применимо), чтобы приложение можно было установить даже в случае истечения срока действия сертификата.

### <a name="other-settings"></a>Другие параметры

- **Исключения файлов и реестра** Хотя у нас есть набор исключаемых элементов по умолчанию, мы рекомендуем рассмотреть и добавить или удалить любые исключаемые элементы для конкретных нужд. 
- **Коды завершения установщика** Если у вас есть определенные коды выхода установщика, которые необходимо активировать для перезапуска во время преобразования, их можно указать здесь. По умолчанию мы уже добавили общие шаблоны, но их можно удалить, если вы никогда не хотите запускать перезагрузку. Обратите внимание, что при использовании пользовательского интерфейса средство упаковки никогда не активирует перезагрузку автоматически, но если вы используете параметр командной строки, это приведет к автоматическому запуску программы. 
 
Вы также можете импортировать или экспортировать параметры для совместного использования с помощью этих [инструкций](duplicate-tool-settings-across-devices.md). 

## <a name="best-practices-during-repackaging"></a>Рекомендации по повторной упаковке

При использовании средства упаковки MSIX существует несколько вещей, которые мы рекомендуем использовать в процессе переупаковки.

- При упаковке установщиков ClickOnce необходимо отправлять ярлык на рабочий стол, если установщик не предусматривает выполнение такой операции. В целом рекомендуется всегда отправлять на рабочий стол ярлык исполняемого файла основного приложения.
- При создании пакетов изменений необходимо объявить имя пакета (имя удостоверения) родительского приложения в пользовательском интерфейсе средства, чтобы средство правильно установило зависимость пакета в манифесте пакета изменения.
- Выполнение подготовительных действий на странице **Подготовка компьютера** является необязательным, но настоятельно рекомендуется, так как это поможет уменьшить излишние данные в пакете.
- Необходимо подписать пакет, чтобы установить его, но мы также рекомендуем отметку времени сертификата, чтобы приложение можно было установить даже в случае истечения срока действия сертификата.
- Объявление поля расположения установки на странице **сведений о пакете** является необязательным. Убедитесь, что этот путь совпадает с расположением установки установщика приложений.

## <a name="best-practices-for-testing-your-msix-package"></a>Рекомендации по тестированию пакета MSIX

Мы рекомендуем также протестировать пакет MSIX после преобразования в чистой среде, как было указано во время настройки среды. Необходимо протестировать пакет MSIX на другом компьютере, на котором не установлен предыдущий установщик, чтобы гарантировать, что при развертывании пакета MSIX он будет иметь все необходимые компоненты и не будет выполнять выбор из предыдущего установщика. Это можно сделать с помощью новой виртуальной машины, такой как [Быстрое создание виртуальной](Quick-Create-VM.md)машины, или путем восстановления компьютера преобразования, если вы создали контрольную точку перед началом преобразования.
