---
title: Знакомство с установщиком
description: В этой статье приводится информация, которую необходимо знать, прежде чем упаковывать классические приложения. Возможно, вам не потребуется много усилий для подготовки приложения к упаковке.
ms.date: 01/29/2020
ms.topic: article
keywords: msix
ms.localizationpriority: medium
ms.openlocfilehash: 735e7cdaa83573120b55379d22918d89431e87ac
ms.sourcegitcommit: 4d912f89e385268757e87bf8fd9ca1828b99e109
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/21/2020
ms.locfileid: "77544576"
---
# <a name="know-your-installer"></a>Знакомство с установщиком

В этой статье перечислены вещи, которые необходимо знать перед преобразованием существующего установщика в MSIX. Вам может не потребоваться много усилий, чтобы приложение было готово к процессу упаковки, но если какой бы то ни было из приведенных ниже элементов применимо к вашему приложению, необходимо устранить его перед упаковкой.

+ __Приложение содержит службу__. Мы поддерживаем преобразование [приложений со службами](convert-an-installer-with-services.md), но важно помнить об [ограничениях](convert-an-installer-with-services.md#known-limitations) на преобразование службы. После преобразования потребуется повышение прав администратора, чтобы установить MSIX, содержащий службу. Приложение можно преобразовать в службы, начиная с версии 1.2019.1220.0 средства упаковки MSIX, а также можно развернуть MSIX со службами, начиная с выпуска пружины 2020 Windows 10.

+ __Для установщика требуется перезагрузка__. Если установщик требует [перезагрузки](support-restart.md), это поддерживается в средстве упаковки MSIX, начиная с версии 1.2019.701.0. Если установщик возвращает нераспространенный код выхода, указывающий на необходимость перезапуска, следует добавить его в раздел [коды выхода перезапуска](tool-best-practices.md#other-settings) в параметрах средства упаковки MSIX. 

+ __Для приложения .NET требуется версия .NET Framework более ранняя, чем 4.6.2__. При упаковке приложения .NET рекомендуется, чтобы для него использовалась платформа .NET Framework 4.6.2 или более поздней версии. Возможность установки и запуска упакованных классических приложений впервые появилась в Windows 10 версии 1607 (также именуемой юбилейным обновлением). Эта версия ОС включает в себя .NET Framework 4.6.2 по умолчанию. Более поздние версии ОС включают в себя более поздние версии .NET Framework. Полный список версий .NET, которые входят в состав более поздних версий Windows 10, см. в [этой статье](https://docs.microsoft.com/dotnet/framework/migration-guide/versions-and-dependencies).

  .NET Framework более ранних версий, чем 4.6.2, работает с упакованными классическими приложениями в большинстве случаев. Тем не менее, если вы используете более раннюю версию, чем 4.6.2, следует полностью протестировать упакованное классическое приложение перед его распространением среди пользователей.

  + 4,0-4.6.1: приложения, предназначенные для этих версий .NET Framework, должны выполняться без проблем в 4.6.2 или более поздней версии. Поэтому такие приложения должны устанавливаться и работать без изменений в Windows 10 версии 1607 или более поздних с версией .NET Framework, которая предусмотрена в операционной системе.

  + 2,0 и 3,5: в нашем тестировании Упакованные классические приложения, предназначенные для этих версий .NET Framework, обычно работают, но могут демонстрировать проблемы с производительностью в некоторых сценариях. Чтобы эти упакованные приложения могли устанавливаться и запускаться, на целевом компьютере должен быть установлен [компонент .NET Framework 3.5](https://docs.microsoft.com/dotnet/framework/install/dotnet-35-windows-10) (он также включает в себя .NET Framework 2.0 и 3.0). Следует также тщательно протестировать эти приложения после их упаковки.

+ __Приложению требуется драйвер__. MSIX не поддерживает драйверы. 

+ __Ваше приложение выполняет запись в папку AppData или в реестр с перспективой обмена данными с другим приложением__. После преобразования данные папки AppData перенаправляются в локальное хранилище данных приложения, являющееся частным хранилищем для каждого приложения.

  Все записи, которые ваше приложение вносит в куст реестра HKEY_LOCAL_MACHINE, перенаправляются в изолированный двоичный файл, а все записи, которые ваше приложение вносит в куст реестра HKEY_CURRENT_USER, помещаются в отдельное для каждого пользователя или каждого приложения расположение. Дополнительные сведения о перенаправлении файлов и реестра см. в статье [о работе моста для классических приложений](../desktop/desktop-to-uwp-behind-the-scenes.md). 

 + __Приложение выполняет запись в каталог установки приложения__. Например, ваше приложение выполняет запись в файл журнала, который вы поместили в тот же каталог, что и EXE-файл. Это не поддерживается, так как папка защищена. Мы рекомендуем записывать данные в другое расположение, например локальное хранилище данных приложений. Мы добавили возможность, которая допускает это в 1809 и более поздних версиях.

+ __Приложение использует текущий рабочий каталог__. В среде выполнения ваше упакованное классическое приложение не получит тот же рабочий каталог, который ранее указан для вашего ярлыка LNK на рабочем столе. Необходимо изменить CWD в среде выполнения, если у вашего приложения должен быть правильный каталог, чтобы оно работало должным образом.

  > [!NOTE]
  > Если приложению требуется выполнять запись в каталог установки или использовать текущий рабочий каталог, можно также добавить в пакет исправление среды выполнения с помощью [платформы поддержки пакетов](https://github.com/microsoft/MSIX-PackageSupportFramework). Дополнительные сведения см. в [этой статье](../psf/package-support-framework.md).  