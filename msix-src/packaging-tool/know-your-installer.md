---
title: Знакомство с установщиком
description: В этой статье перечислены вещи, которые необходимо знать перед упаковкой приложения для настольных систем. Подготовка приложения к процессу упаковки, как правило, не требует больших усилий.
ms.date: 01/29/2020
ms.topic: article
keywords: msix
ms.localizationpriority: medium
ms.openlocfilehash: 9dcad66f84c14648bce90920bf42bfd9faf2de8c
ms.sourcegitcommit: e650c86433c731d62557b31248c7e36fd90b381d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/02/2020
ms.locfileid: "82726466"
---
# <a name="know-your-installer"></a>Знакомство с установщиком

В этой статье перечислены вещи, которые необходимо знать перед преобразованием существующего установщика в MSIX. Вам может не потребоваться много усилий, чтобы приложение было готово к процессу упаковки, но если какой бы то ни было из приведенных ниже элементов применимо к вашему приложению, необходимо устранить его перед упаковкой.

+ __Приложение содержит службу__. Мы поддерживаем преобразование [приложений со службами](convert-an-installer-with-services.md), но важно помнить об [ограничениях](convert-an-installer-with-services.md#known-limitations) на преобразование службы. После преобразования потребуется повышение прав администратора, чтобы установить MSIX, содержащий службу. Приложение можно преобразовать в службы, начиная с версии 1.2019.1220.0 средства упаковки MSIX, а также можно развернуть MSIX со службами, начиная с выпуска пружины 2020 Windows 10.

+ __Для установщика требуется перезагрузка__. Если установщик требует [перезагрузки](support-restart.md), это поддерживается в средстве упаковки MSIX, начиная с версии 1.2019.701.0. Если установщик возвращает нераспространенный код выхода, указывающий на необходимость перезапуска, следует добавить его в раздел [коды выхода перезапуска](tool-best-practices.md#other-settings) в параметрах средства упаковки MSIX. 

+ Для __приложения .NET требуется версия .NET Framework более раннюю, чем 4.6.2__. При упаковке приложения .NET рекомендуется, чтобы целевой объект приложения .NET Framework 4.6.2 или более поздней версии. Возможность установки и запуска упакованных классических приложений впервые появилась в Windows 10, версия 1607 (также именуемая обновлением годовщины), а эта версия ОС включает .NET Framework 4.6.2 по умолчанию. Более поздние версии ОС включают в себя более поздние версии .NET Framework. Полный список версий .NET, которые входят в состав более поздних версий Windows 10, см. в [этой статье](https://docs.microsoft.com/dotnet/framework/migration-guide/versions-and-dependencies).

  В большинстве случаев рекомендуется использовать целевые версии .NET Framework более ранние, чем 4.6.2 в упакованных настольных приложениях. Однако если вы нацелены на более раннюю версию, чем 4.6.2, следует полностью протестировать упакованное настольное приложение перед его распространением пользователям.

  + 4,0-4.6.1: приложения, предназначенные для этих версий .NET Framework, должны выполняться без проблем в 4.6.2 или более поздней версии. Поэтому эти приложения должны устанавливаться и работать без изменений в Windows 10, версии 1607 или более поздней с версией .NET Framework, которая входит в состав операционной системы.

  + 2,0 и 3,5: в нашем тестировании Упакованные классические приложения, предназначенные для этих версий .NET Framework, обычно работают, но могут демонстрировать проблемы с производительностью в некоторых сценариях. Чтобы эти Упакованные приложения могли устанавливаться и запускаться, на целевом компьютере должен быть установлен [компонент .NET Framework 3,5](https://docs.microsoft.com/dotnet/framework/install/dotnet-35-windows-10) (этот компонент также включает .NET Framework 2,0 и 3,0). Следует также тщательно протестировать эти приложения после их упаковки.

+ __Приложению требуется драйвер__. MSIX не поддерживает драйверы. 

+ __Приложение записывает данные в папку AppData или в реестр с намерением обмениваться данными с другим приложением__. После преобразования AppData будет перенаправлен в локальное хранилище данных приложений, которое является частным хранилищем для каждого приложения.

  Все записи, записываемые приложением в куст реестра HKEY_LOCAL_MACHINE, перенаправляются в изолированный двоичный файл, а все записи, записываемые приложением в куст реестра HKEY_CURRENT_USER, помещаются в личное расположение на уровне пользователя или приложения. Дополнительные сведения о перенаправлении файлов и реестра см. в разделе [Как работает мост для классических приложений](../desktop/desktop-to-uwp-behind-the-scenes.md). 

 + __Приложение записывает в каталог установки приложения__. Например, приложение записывает в файл журнала, который вы поместили в тот же каталог, что и ваш файл exe. Это не поддерживается, так как папка защищена. Мы рекомендуем записывать данные в другое расположение, например локальное хранилище данных приложений. Мы добавили возможность, которая допускает это в 1809 и более поздних версиях.

+ __Приложение использует текущий рабочий каталог__. Во время выполнения упакованное настольное приложение не будет иметь тот же рабочий каталог, который был ранее указан на рабочем столе. Ярлык LNK. Необходимо изменить КВД во время выполнения, если для правильного функционирования приложения важен правильный каталог.

+ __Приложение устанавливает и загружает сборки из параллельной папки Windows__. Например, приложение использует библиотеки среды выполнения C VC8 или VC9 и динамически связывает их из параллельной папки Windows, что означает, что ваш код использует общие DLL-файлы из общей папки, например К:\виндовс\винсксс. Такой режим работы не поддерживается. Необходимо подключать их статически, то есть связать с распространяемыми файлами библиотеки непосредственно в самом коде. 

  > [!NOTE]
  > Если приложению требуется выполнить запись в каталог установки или использовать текущий рабочий каталог, можно также добавить исправление среды выполнения с помощью [платформы поддержки пакетов](https://github.com/microsoft/MSIX-PackageSupportFramework) в пакет. Дополнительные сведения см. в [этой статье](../psf/package-support-framework.md).  
