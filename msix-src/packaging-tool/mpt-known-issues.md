---
title: Известные проблемы и устранение неполадок
description: В этой статье описаны известные проблемы, возникающие при работе со средством упаковки MSIX, и приведены советы по их устранению.
ms.date: 02/26/2019
ms.topic: article
keywords: msix packaging tool, known issues, troubleshooting
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: b38231f6cf918ecbcd598c01e17c68e4e072cfd5
ms.sourcegitcommit: 9cb3d2cdbe03b300bef60ed949e5e4d3b24d35ba
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2019
ms.locfileid: "70864002"
---
# <a name="known-issues-and-troubleshooting"></a>Известные проблемы и устранение неполадок

В этой статье описаны известные проблемы, возникающие при преобразовании приложений в формат MSIX с помощью средства упаковки MSIX, и приведены рекомендации по их устранению.

## <a name="known-issues"></a>Известные проблемы

### <a name="msix-packaging-tool-driver-considerations"></a>Вопросы, связанные с драйвером средства упаковки MSIX

Драйвер средства упаковки MSIX предоставляется Центром обновления Windows как пакет [компонента по запросу](https://docs.microsoft.com/windows-hardware/manufacture/desktop/features-on-demand-v2--capabilities). Установка драйвера завершится сбоем, если служба Центра обновления Windows отключена на компьютере или если параметры цикла тестирования Windows Insider не соответствуют сборке ОС компьютера.

### <a name="installing-msix-packaging-tool-driver-fod-on-windows-insider-builds"></a>Установка компонента по запросу с драйвером средства упаковки MSIX в сборках Windows Insider

Если у вас возникают проблемы при установке драйвера в сборке Windows 10 Insider Preview, сделайте следующее:

- Выберите **Параметры** > **Обновления и безопасность** > **Программа предварительной оценки Windows**.
- Если отобразится сообщение о необходимости настройки параметров для сборки Insider Preview, нажмите кнопку **Исправить**, чтобы войти повторно. Возможно, вам потребуется перейти на страницу Центра обновления Windows и проверить наличие обновлений, прежде чем изменения вступят в силу.
- Попробуйте повторно запустить средство, чтобы скачать драйвер средства упаковки MSIX. Если проблемы не исчезли, попробуйте сменить цикл тестирования на "Предварительная оценка — ранний доступ", установите последние обновления Windows и повторите попытку.

### <a name="installing-msix-packaging-tool-driver-fod-in-wsus"></a>Установка компонента по запросу с драйвером средства упаковки MSIX в WSUS

Специалисты организаций, в которых используются службы Windows Server Update Services (WSUS), должны выполнить определенные действия для установки драйвера вручную:

- [Проверьте свою версию Windows](https://support.microsoft.com/help/13443/windows-which-operating-system). Требуется Windows 10 с версией не ниже 1809 (сборка 17763).
- Скачайте CAB-файл компонента по запросу для [Windows 10, версия 1809](https://download.microsoft.com/download/8/4/3/8436215A-42DB-4FD2-966D-60D436D6EEFC/Msix-PackagingTool-Driver-Package~31bf3856ad364e35~amd64~~.cab).
- Полученные отдельно пакеты с компонентами по запросу можно установить с помощью [параметров командной строки системы DISM](https://docs.microsoft.com/windows-hardware/manufacture/desktop/dism-operating-system-package-servicing-command-line-options). В окне PowerShell с повышенными привилегиями введите следующее: ```Dism /Online /add-package /packagepath:(path)```

ИТ-администраторы также могут создать [параллельное хранилище компонентов (общую папку)](https://docs.microsoft.com/windows-server/administration/server-manager/configure-features-on-demand-in-windows-server), чтобы обеспечить доступ к компоненту по запросу с драйвером средства упаковки MSIX. Подробные сведения можно найти внизу этой [записи блога](https://techcommunity.microsoft.com/t5/Windows-IT-Pro-Blog/Language-pack-acquisition-and-retention-for-enterprise-devices/ba-p/275404).

В противном случае, если у вас есть доступ к каналам сбыта Enterprise или OEM, вы можете получить драйвер на носителе с компонентами Windows 10 по запросу из таких источников:

- [Веб-сайт VLSC](https://www.microsoft.com/Licensing/servicecenter/default.aspx): для доступа требуется корпоративная лицензия.
- [Портал для OEM-поставщиков](https://www.microsoftoem.com): для доступа требуются права OEM-поставщика.
- [Центр загрузки MSDN](https://my.visualstudio.com/Downloads/Featured): для доступа требуется подписка MSDN.

Полученные отдельно пакеты с компонентами по запросу можно установить с помощью параметров командной строки системы DISM.

### <a name="getting-the-msix-packaging-tool-for-offline-use"></a>Получение средства упаковки MSIX для использования в автономном режиме

Средство упаковки MSIX также можно скачать с [веб-портала](https://businessstore.microsoft.com/store) Microsoft Store для бизнеса, чтобы использовать на предприятии в автономном режиме. См. подробнее об [автономном распространении](https://docs.microsoft.com/microsoft-store/distribute-offline-apps). Если возникают проблемы с автономной копией средства упаковки, убедитесь, что у вас есть [автономная копия лицензии](https://docs.microsoft.com/microsoft-store/distribute-offline-apps#download-an-offline-licensed-app) для этого средства. 

После получения автономной версии приложения можно добавить на компьютер пакет приложения и лицензию с помощью [PowerShell](https://docs.microsoft.com/powershell/module/dism/add-appxprovisionedpackage?view=win10-ps).


## <a name="other-known-issues"></a>Другие известные проблемы

- Возможно, что до начала работы установщик потребует установить определенные платформы или драйверы. Чтобы найти платформы и драйверы на компьютере, который используется для преобразования приложений, выполните следующие запросы: ```driverquery /v | Out-File``` или ```driverquery /v | Out-File "path to text file"```
- Во время преобразования установщики могут запускать службы. Данные служб не собираются во время преобразования. В результате ваше приложение может быть установлено, но при работе могут возникать проблемы.

# <a name="troubleshooting"></a>Поиск и устранение неисправностей

## <a name="log-files"></a>Файлы журнала

Файлы журналов создаются для всех операций преобразований, независимо от их успешности. Их можно найти по такому пути: 

`%localappdata%\packages\Microsoft.MsixPackagingTool_8wekyb3d8bbwe\LocalState\DiagOutputDir\`

В журналах записываются коды ошибок, которые указывают на точку отказа в процессе преобразования. Коды ошибок должны быть понятны пользователям.

### <a name="log-files-from-remote-devices-or-vms"></a>Файлы журналов с удаленных устройств или виртуальных машин

Если преобразование выполняется на удаленном устройстве или виртуальной машине, мы рекомендуем вам скопировать файлы журналов с такого устройства и вложить их при отправке отчета. Это позволит нам более эффективно провести диагностику и устранить проблему. 

Журналы удаленного преобразования можно найти по этому пути: `%localappdata%\packages\Microsoft.MsixPackagingTool_8wekyb3d8bbwe\LocalState\DiagOutputDir\<Logs_#>\RemoteServer\Log.txt`

Предпочтительнее, если вы сможете отправить всю папку журналов, которая содержит данные об операциях, выполняющихся на локальном клиенте и на удаленном сервере.

## <a name="examples-of-failures-during-conversions"></a>Примеры сбоев во время преобразования

### <a name="uninstallation-error---exit-code-259"></a>Ошибка удаления — код завершения 259

Некоторые установщики могут завершать преобразование со сбоем и выдачей кода завершения 259. Такой код означает, что установщик создал поток и не дождался завершения его работы. То есть основной поток выполнил установку, но завершил работу с ошибкой 259, так как им был создан поток, который еще выполняется. В таком случае мы рекомендуем использовать соответствующий параметр установки для приложения setup.exe.

### <a name="internal-warning-messages"></a>Внутренние предупреждающие сообщения

Возможно появление таких предупреждающих сообщений: **[Warning] W_COM_PUBFAIL_INPROC_SERVER_NOT_SUPPORTED**.
Это означает, что средство упаковки MSIX обнаружило регистрацию COM, которая не совпадает с имеющимся пакетом MSIX. Если вы преобразуете приложение и оно заработает без проблем, с большой вероятностью ошибка была вызвана ненужными записями COM. Но если вы замечаете новое поведение, это означает, что такое поведение COM не было зарегистрировано при преобразовании.

## <a name="sending-feedback"></a>Отправка отзыва

Проще всего отправить отзыв через **Центр отзывов**.
1. Откройте **Центр отзывов** или нажмите клавиши **Windows+F**.
2. Введите название и шаги для воспроизведения проблемы.
3. В разделе **Категория** выберите **Приложения** и **MSIX Packaging Tool** (Средство упаковки MSIX).
4. Вложите [файлы журналов](#log-files) преобразования. Журналы можно найти в указанной выше папке.
5. Вложите преобразованный пакет MSIX (если это возможно).
6. Нажмите кнопку **Отправить**.

Вы также можете отправить отчет непосредственно из средства упаковки MSIX, перейдя на вкладку **Отзыв** в окне **Параметры**. 

> [!NOTE]
> На доставку отчета может потребоваться до 24 часов. Поэтому если для преобразования пакета вы используете виртуальную машину, мы рекомендуем оставить ее включенной и поддерживать ее текущее состояние в течение 24 часов после преобразования. 
