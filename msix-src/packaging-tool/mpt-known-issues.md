---
title: Известные проблемы и советы по устранению неполадок средства упаковки MSIX
description: Описание известных проблем и рекомендации по устранению неполадок, которые следует учитывать при преобразовании приложений в MSIX с помощью средства упаковки MSIX.
ms.date: 10/04/2019
ms.topic: article
keywords: msix packaging tool, known issues, troubleshooting
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: 6267957f49cd7a0ca01d9f4e4095bb500d33af69
ms.sourcegitcommit: e9a890c674dd21c9a09048e2520a3de632753d27
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2019
ms.locfileid: "73328365"
---
# <a name="known-issues-and-troubleshooting-tips-for-the-msix-packaging-tool"></a>Известные проблемы и советы по устранению неполадок для средства упаковки MSIX

В этой статье описаны известные проблемы, возникающие при преобразовании приложений в формат MSIX с помощью средства упаковки MSIX, и приведены рекомендации по их устранению.

## <a name="known-issues"></a>Известные проблемы

### <a name="getting-the-latest-insider-preview-build-of-the-msix-packaging-tool"></a>Получение последней предварительной сборки предварительной версии средства упаковки MSIX

Если вы выбрали [программу предварительной оценки](insider-program.md), убедитесь, что у вас установлена правильная версия средства упаковки MSIX:
- Перейдите к разделу **About** в средстве упаковки MSIX, чтобы просмотреть версию, на которой вы используете.

- Перейдите [сюда](insider-program.md#current-insider-preview-build) , чтобы определить последнюю предварительную версию предварительной версии и убедиться, что установлена эта версия средства упаковки MSIX. Убедитесь, что в системе MSA, которая зарегистрирована для рейса, выбрана учетная запись, которая входит в Microsoft Store. 
- Вручную обновите средство упаковки MSIX с помощью Microsoft Store на компьютере. Если этот параметр доступен, откройте магазин, перейдите в раздел **загрузки и обновления**и нажмите кнопку **получить обновления**.
- Чтобы установить средство упаковки MSIX для использования в автономном режиме, выполните следующие [инструкции](#getting-the-msix-packaging-tool-for-offline-use) , чтобы получить последнюю версию приложения с помощью нашего автономного процесса.

Если вы хотите присоединиться к программе предварительной оценки, щелкните [здесь](https://aka.ms/MSIXPackagingPreviewProgram).

### <a name="msix-packaging-tool-driver-considerations"></a>Вопросы, связанные с драйвером средства упаковки MSIX

Драйвер средства упаковки MSIX поставляется как пакет по [запросу (FOD)](https://docs.microsoft.com/windows-hardware/manufacture/desktop/features-on-demand-v2--capabilities) от Центр обновления Windows и не может быть установлен, если служба центр обновления Windows отключена на компьютере или параметры кольца Microsoft Windows для рейсов не соответствуют сборке ОС компьютерами.

### <a name="installing-msix-packaging-tool-driver-fod-on-windows-insider-builds"></a>Установка компонента по запросу с драйвером средства упаковки MSIX в сборках Windows Insider

Если у вас возникают проблемы при установке драйвера в сборке Windows 10 Insider Preview, сделайте следующее:

- Выберите **Параметры** > **Обновления и безопасность** > **Программа предварительной оценки Windows**.
- Если отобразится сообщение о необходимости настройки параметров для сборки Insider Preview, нажмите кнопку **Исправить**, чтобы войти повторно. Возможно, вам потребуется перейти на страницу Центра обновления Windows и проверить наличие обновлений, прежде чем изменения вступят в силу.
- Попробуйте повторно запустить средство, чтобы скачать драйвер средства упаковки MSIX. Если проблемы не исчезли, попробуйте сменить цикл тестирования на "Предварительная оценка — ранний доступ", установите последние обновления Windows и повторите попытку.

### <a name="installing-msix-packaging-tool-driver-fod-in-wsus"></a>Установка компонента по запросу с драйвером средства упаковки MSIX в WSUS

Специалисты организаций, в которых используются службы Windows Server Update Services (WSUS), должны выполнить определенные действия для установки драйвера вручную:

- [Проверьте свою версию Windows](https://support.microsoft.com/help/13443/windows-which-operating-system). Требуется Windows 10 с версией не ниже 1809 (сборка 17763).
- Скачайте CAB-файл компонента по запросу для [Windows 10, версия 1809](https://download.microsoft.com/download/8/4/3/8436215A-42DB-4FD2-966D-60D436D6EEFC/Msix-PackagingTool-Driver-Package~31bf3856ad364e35~amd64~~.cab).
- Полученные отдельно пакеты с компонентами по запросу можно установить с помощью [параметров командной строки системы DISM](https://docs.microsoft.com/windows-hardware/manufacture/desktop/dism-operating-system-package-servicing-command-line-options). В окне PowerShell с повышенными привилегиями введите следующее: ```Dism /Online /add-package /packagepath:(path)```

ИТ-администраторы также могут создать [параллельное хранилище компонентов (общую папку)](https://docs.microsoft.com/windows-server/administration/server-manager/configure-features-on-demand-in-windows-server), чтобы обеспечить доступ к компоненту по запросу с драйвером средства упаковки MSIX. Подробные сведения можно найти внизу этой [записи блога](https://techcommunity.microsoft.com/t5/Windows-IT-Pro-Blog/Language-pack-acquisition-and-retention-for-enterprise-devices/ba-p/275404).

В противном случае, если у вас есть доступ к каналам сбыта Enterprise или OEM, вы можете получить драйвер на носителе с компонентами Windows 10 по запросу из таких источников:

- [Служба корпоративного лицензирования Service Center (VLSC)](https://www.microsoft.com/Licensing/servicecenter/default.aspx): требуется доступ к корпоративной лицензии.
- [Портал поставщика вычислительной техники](https://www.microsoftoem.com): требуется доступ к изготовителю оборудования.
- [Скачать MSDN](https://my.visualstudio.com/Downloads/Featured): требуется подписка MSDN.

Полученные отдельно пакеты с компонентами по запросу можно установить с помощью параметров командной строки системы DISM.

### <a name="getting-the-msix-packaging-tool-for-offline-use"></a>Получение средства упаковки MSIX для использования в автономном режиме

Средство упаковки MSIX также можно скачать с [веб-портала](https://businessstore.microsoft.com/store) Microsoft Store для бизнеса, чтобы использовать на предприятии в автономном режиме. См. подробнее об [автономном распространении](https://docs.microsoft.com/microsoft-store/distribute-offline-apps). Если возникают проблемы с автономной копией средства упаковки, убедитесь, что у вас есть [автономная копия лицензии](https://docs.microsoft.com/microsoft-store/distribute-offline-apps#download-an-offline-licensed-app) для этого средства. 

После получения автономной версии приложения можно добавить на компьютер пакет приложения и лицензию с помощью [PowerShell](https://docs.microsoft.com/powershell/module/dism/add-appxprovisionedpackage?view=win10-ps).

### <a name="frameworks-and-drivers"></a>Платформы и драйверы

Если приложению требуется платформа, убедитесь, что платформа установлена на этапе мониторинга преобразования. Просмотрите журналы, чтобы убедиться, что это происходит. Если приложению требуется установить драйвер, необходимо оценить, требуется ли это для работы приложения должным образом. MSIX в настоящее время не поддерживает установку драйверов.

### <a name="remote-machine"></a>Удаленный компьютер
Если при выполнении преобразований с помощью удаленной виртуальной машины возникают проблемы, см. [инструкции по установке для преобразования удаленных компьютеров](remote-conversion-setup.md).

### <a name="issues-during-conversion"></a>Проблемы во время преобразования
- Во время преобразования установщики могут запускать службы. Данные служб не собираются во время преобразования. В результате приложение может установиться, но оно может работать с проблемами.
- Некоторые установщики могут завершать преобразование со сбоем и выдачей кода завершения 259. Такой код означает, что установщик создал поток и не дождался завершения его работы. То есть основной поток выполнил установку, но завершил работу с ошибкой 259, так как им был создан поток, который еще выполняется. В таком случае мы рекомендуем использовать соответствующий параметр установки для приложения setup.exe.

### <a name="issues-during-signing"></a>Проблемы при подписывании

#### <a name="bad-pe-certificate-0x800700c1"></a>Сертификат неверного PE (0x800700C1)

Эта проблема возникает, когда пакет содержит двоичный файл с поврежденным сертификатом. Чтобы устранить эту проблему, используйте команду `dumpbin.exe /headers` для дампа заголовков файлов и проверки на наличие неверных элементов. Вручную Перепишите заголовки, чтобы устранить проблему. Как правило, средство упаковки MSIX автоматически обнаруживает неправильные заголовки. Если проблема не исчезнет, то обратимся к файлу. Дополнительные сведения см. [здесь](../desktop/desktop-to-uwp-known-issues.md#bad-pe-certificate-0x800700c1).

#### <a name="device-guard-signing"></a>Подпись Device Guard

Обязательно выполните [эти действия](https://docs.microsoft.com/windows/msix/package/signing-package-device-guard-signing) и назначьте соответствующие роли в Microsoft Store для бизнеса.

#### <a name="expired-certificate"></a>Сертификат с истекшим сроком действия

- При подписывании пакета используйте метку времени.
- Вы можете подписать действительный сертификат или подпись отметки времени.

Вы можете повторно подписать приложение с помощью [скрипта преобразования пакетной](https://github.com/microsoft/MSIX-Toolkit/tree/master/Scripts)службы.

## <a name="troubleshooting"></a>"Устранение неполадок"

### <a name="log-files"></a>Файлы журнала

Файлы журналов создаются для всех операций преобразований, независимо от их успешности. Их можно найти по такому пути:

`%localappdata%\packages\Microsoft.MsixPackagingTool_8wekyb3d8bbwe\LocalState\DiagOutputDir\`

В журналах записываются коды ошибок, которые указывают на точку отказа в процессе преобразования. Коды ошибок должны быть понятны пользователям.

#### <a name="log-files-from-remote-devices-or-vms"></a>Файлы журналов с удаленных устройств или виртуальных машин

Если преобразование выполняется на удаленном устройстве или виртуальной машине, мы рекомендуем вам скопировать файлы журналов с такого устройства и вложить их при отправке отчета. Это позволит нам более эффективно провести диагностику и устранить проблему.

Журналы удаленного преобразования можно найти по этому пути: `%localappdata%\packages\Microsoft.MsixPackagingTool_8wekyb3d8bbwe\LocalState\DiagOutputDir\<Logs_#>\RemoteServer\Log.txt`

Предпочтительнее, если вы сможете отправить всю папку журналов, которая содержит данные об операциях, выполняющихся на локальном клиенте и на удаленном сервере.

### <a name="common-problems"></a>Распространенные проблемы

#### <a name="makeprimanifest-translation-errors"></a>Ошибки преобразования передаваемые программе MakePRI/manifest

Эта ошибка возникает, если возникла проблема с манифестом пакета. Чтобы узнать причину проблемы, перейдите в редактор пакетов и откройте манифест. При открытии манифеста можно найти проблему и предоставить соответствующее исправление.

#### <a name="file-not-found"></a>Файл не найден

Возможно, файл открыт или не существует. Чтобы устранить эту проблему, добавьте соответствующий файл или закройте файл, который используется в данный момент. Обратите внимание, что при наличии открытой ошибки `File not Found` не возникает. Вместо этого вы получите `Access Denied` или `File in Use` ошибку.

#### <a name="file-type-associations"></a>Сопоставления типов файлов

Проблемы, касающиеся сопоставлений типов файлов (ФТА), зависят от пакета и пакета. Средство упаковки MSIX поддерживает сопоставление файлов для установки двойного щелчка. Например, если приложение имеет контекстное меню, оно не добавляется автоматически, поэтому его необходимо добавить в манифест вручную. Пример см. в элементе манифеста [desktop4: филиксплорерконтекстменус](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-desktop4-fileexplorercontextmenus) .

#### <a name="shortcuts-with-arguments"></a>Сочетания клавиш с аргументами

В настоящее время в MSIX не поддерживаются сочетания клавиш с аргументами. Если мы обнаружите, что установщик включает эти данные, MSIX создаст плитку без аргументов.

#### <a name="install-directory"></a>Каталог установки

Это наиболее распространено для тех, кто использует вторичный диск для выполнения преобразований приложений. Если вы решили изменить расположение установки, то изменится корневой каталог, в который будут переходить все файлы. Это означает, что инструменту упаковки MSIX необходимо знать, где находятся все эти файлы и которые будут записываться во время преобразования. 

## <a name="sending-feedback"></a>Отправка отзыва

Лучший способ отправить отзыв — через [**центр обратной связи**](https://www.microsoft.com/p/feedback-hub/9nblggh4r32n?activetab=pivot:overviewtab).

1. Откройте **Центр отзывов** или нажмите клавиши **Windows+F**.
2. Введите название и шаги для воспроизведения проблемы.
3. В разделе **Категория** выберите **Приложения** и **MSIX Packaging Tool** (Средство упаковки MSIX).
4. Вложите [файлы журналов](#log-files) преобразования. Журналы можно найти в указанной выше папке.
5. Вложите преобразованный пакет MSIX (если это возможно).
6. Нажмите кнопку **Отправить**.

Вы также можете отправить отчет непосредственно из средства упаковки MSIX, перейдя на вкладку **Отзыв** в окне **Параметры**. 

> [!NOTE]
> На доставку отчета может потребоваться до 24 часов. Поэтому если для преобразования пакета вы используете виртуальную машину, мы рекомендуем оставить ее включенной и поддерживать ее текущее состояние в течение 24 часов после преобразования. Кроме того, можно вручную присоединить журналы преобразования к обратной связи.
