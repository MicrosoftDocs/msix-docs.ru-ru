---
title: Обновления пакетов приложений
description: Узнайте, как приложения differentially обновляются.
author: mcleanbyron
ms.author: mcleans
ms.date: 09/10/2018
ms.topic: article
keywords: Windows 10, uwp, пакет приложения, обновления приложения, msix, appx
ms.localizationpriority: medium
ms.custom: RS5, seodec18
ms.openlocfilehash: 1d7fc6a2d899638a8d38c47a477653173f2c5c9d
ms.sourcegitcommit: b6887e8f66e1d4a49870b933efa25d539eabfcaf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2019
ms.locfileid: "65882602"
---
# <a name="app-package-updates"></a>Обновления пакетов приложений

Обновление современных пакеты приложений Windows оптимизирована для убедитесь, что лишь essential измененные части приложения загружаются для обновления существующего приложения Windows.

## <a name="metadata-in-the-appxblockmapxml-file"></a>Метаданные в файле AppxBlockMap.xml

На высоком уровне, во время создания пакета часть метаданных создается и сохраняется в файле пакета приложения (AppX или .msix), что позволяет частей пакета, который однозначно идентифицируется Windows. При обновлении пакета приложения Windows использует файл метаданных для сравнения старого пакета в новый пакет и определить, что необходимо загрузить на устройство.

Поскольку метаданные позволяют части пакета для однозначной идентификации, это означает разностные обновления оборудования полностью функции с любой версии пакета для любой другой версии пакета (предполагая, что исходный пакет имеет более ранней версии, чем у целевого объекта пакет). 

Метаданные содержатся в файле AppxBlockMap.xml (упомянутые выше метаданные). Файл AppxBlockMap.xml является XML-файл, содержащий двух измерений список сведений о файлов в пакете. Первое измерение размещает общим сведениям о файле (например, имя и размер) и во втором измерении содержит хэш SHA2-256, предоставляющие каждого 64 КБ среза этого файла («блок»).

Ниже приведен пример файла AppxBlockMap.xml.

```xml
<!--?xml version="1.0" encoding="UTF-8"?-->
<blockmap hashmethod="http://www.w3.org/2001/04/xmlenc#sha256" 
          xmlns="http://schemas.microsoft.com/appx/2010/blockmap">
  <file lfhsize="66" size="101188" name="asset1.jpg">
    <block hash="2bidNE0JyaO+FjaTpRe0g8HzUCblUf/cfBcTXiZR74c="/>
    <block hash="+jeFwKrGk5gw9wSICWsWRtEQXwcLC7af4EWS7DgrAkY="/>
  </file>
  <file lfhsize="61" size="108823" name="asset2.jpg">
    <block hash="u0+5S0GOzwyAfYx54tKycZyHRBYm2ybvq27dkIKqDsQ="/>
    <block hash="F9h0FRMetL6BNCszAYB0bgyx2KWN+dO1bls4Q9m267c="/>
  </file>
  ...
</blockmap>
```

Первый файл (asset1.jpg) имеет два хэшей блоков. Первый хэш-код представляет первый блок 64 КБ, файла, а второй хэш представляет остальные 35 КБ - файла — 101188 байт.

Во время обновления Если второй блок этого файла изменяется, хэш также обновляется соответствующим образом. Компонент загрузки переносится второй блок и повторно использует первый блок без изменений из старого пакета.

Большего масштаба, если весь файл не будет изменяться (определяется полный набор блоков не изменяется), этот файл можно повторно использовать из существующего пакета, экономя время и ресурсы.

## <a name="app-update-constraints"></a>Ограничения на обновление приложения

#### <a name="updates-are-performed-within-the-same-package-family"></a>Обновления выполняются в рамках того же семейства пакетов
Семейство пакета состоит из имени пакета и издателя. Чтобы иметь возможность обновления, новые метаданные пакета, необходимо будет таким же, как ранее установленному пакету. 

#### <a name="app-updates-must-increment-to-a-higher-version"></a>Обновления приложений, необходимо увеличить до более поздней версии
Обновления приложений — общие потребует версии нового пакета будет больше, чем текущий. Процесс обновления Общие приложения не позволит пакетов с помощью более ранние версии, устанавливаемые по умолчанию. Начало обновления Windows 10 1809, *«rollback»* был введен. Она позволяет ниже версии пакетов для установки при коммутатору переопределение предоставляется как часть аргументов обновления. Настоящее время служба доступна в PowerShell, с помощью параметра ForceUpdateFromAnyVersion и [AppInstaller файл](https://docs.microsoft.com/en-us/windows/msix/app-installer/update-settings).  

#### <a name="app-update-package-can-have-a-different-architecture"></a>Пакет обновления приложения может иметь другой архитектуры
Пакет обновления к пакету в настоящее время установленного приложения может иметь другой архитектуры до тех пор, пока новая архитектура поддерживается в операционной системе, где он выполняется развертывание. Пример: Если у вас есть x86 MyFavApp(v1.0.0.0) версии в x64 устройства Windows 10 и package(v2.0.0.0) обновления является x64 версии: MyFavApp(1.0.0.0) будет успешно обновлен MyFavApp(v2.0.0.0). 

#### <a name="packages-can-update-from-an-msix-to-an-msixbundle"></a>Пакеты можно обновить из MSIX MSIXbundle
Пакет обновления можно перейти из пакета MSIX MSIXbundle пакета, но не наоборот. При установке MSIXbundle при обновлении пакета необходимо оставить пакет. 

## <a name="optimize-differential-update-technology"></a>Оптимизация технологию разностные обновления
    
Чтобы убедиться, что разностные обновления технологии оптимизирован для максимального количества несколькими способами.

- Храните файлы в пакете small - это гарантирует, что если необходимо изменить, повлияло бы на полный файл, обновление по-прежнему будет небольшой.
- Изменения в файлы должны быть аддитивными по возможности - аддитивные изменения гарантирует, что устройства конечных пользователей загружать только те измененные блоки.
- Изменения в файлах должны быть включены возможности - блоков по 64 КБ, если ваше приложение привести большие файлы и требует изменения в середину файл, содержащий изменения в набор блоков помогут значительно.
 

