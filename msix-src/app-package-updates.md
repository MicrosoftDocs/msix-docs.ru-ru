---
title: Обновления пакета приложений
description: Узнайте, как приложения differentially обновляются.
author: mcleanbyron
ms.author: mcleans
ms.date: 09/10/2018
ms.topic: article
keywords: Windows 10, uwp, пакет приложения, обновления приложения, msix, appx
ms.localizationpriority: medium
ms.custom: RS5, seodec18
ms.openlocfilehash: 786dd7236b8d5c8600dd36e5d3e507576df79ae7
ms.sourcegitcommit: 92e034ce942cf3df1ea243b03e7b38ed78af4d43
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2019
ms.locfileid: "58900516"
---
# <a name="app-package-updates"></a>Обновления пакета приложений

Обновление современных пакеты приложений Windows оптимизирована для убедитесь, что лишь essential измененные части приложения загружаются для обновления существующего приложения Windows.

## <a name="metadata-in-the-appxblockmapxml-file"></a>Метаданные в файле AppxBlockMap.xml

На высоком уровне, во время создания пакета часть метаданных создается и сохраняется в файле пакета приложения (AppX или .msix), что позволяет частей пакета, который однозначно идентифицируется Windows. При обновлении пакета приложения Windows использует файл метаданных для сравнения старого пакета в новый пакет и определить, что необходимо загрузить на устройство.

Поскольку метаданные позволяют части пакета для однозначной идентификации, это означает разностные обновления оборудования полностью функции с любой версии пакета для любой другой версии пакета (предполагая, что исходный пакет имеет более ранней версии, чем у целевого объекта пакет). 

Метаданные содержатся в файле AppxBlockMap.xml (упомянутые выше метаданные). Файл AppxBlockMap.xml является XML-файл, содержащий двух измерений список сведений о файлов в пакете. Первое измерение размещает общим сведениям о файле (например, имя и размер) и во втором измерении содержит хэш SHA2-256, предоставляющие каждого 64 КБ среза этого файла («блок»).

Ниже приведен пример файла AppxBlockMap.xml.

```xml
<!--?xml version="1.0" encoding="UTF-8"?-->
<blockmap hashmethod="http://www.w3.org/2001/04/xmlenc#sha256" 
          xmlns="http://schemas.microsoft.com/appx/2010/blockmap">
  <file lfhsize="66" size="101188" name="asset1.jpg">
    <block hash="2bidNE0JyaO+FjaTpRe0g8HzUCblUf/cfBcTXiZR74c="/>
    <block hash="+jeFwKrGk5gw9wSICWsWRtEQXwcLC7af4EWS7DgrAkY="/>
  </file>
  <file lfhsize="61" size="108823" name="asset2.jpg">
    <block hash="u0+5S0GOzwyAfYx54tKycZyHRBYm2ybvq27dkIKqDsQ="/>
    <block hash="F9h0FRMetL6BNCszAYB0bgyx2KWN+dO1bls4Q9m267c="/>
  </file>
  ...
</blockmap>
```

Первый файл (asset1.jpg) имеет два хэшей блоков. Первый хэш-код представляет первый блок 64 КБ, файла, а второй хэш представляет остальные 35 КБ - файла — 101188 байт.

Во время обновления Если второй блок этого файла изменяется, хэш также обновляется соответствующим образом. Компонент загрузки переносится второй блок и повторно использует первый блок без изменений из старого пакета.

Большего масштаба, если весь файл не будет изменяться (определяется полный набор блоков не изменяется), этот файл можно повторно использовать из существующего пакета, экономя время и ресурсы.

Существует несколько способов использования этой технологии разностные обновления.

- Храните файлы в пакете small - это гарантирует, что если необходимо изменить, повлияло бы на полный файл, обновление по-прежнему будет небольшой.
- Изменения в файлы должны быть аддитивными по возможности - аддитивные изменения гарантирует, что устройства конечных пользователей загружать только те измененные блоки.
- Изменения в файлы должны быть включены возможности - блоков по 64 КБ, если ваше приложение привести большие файлы и требует изменения в середину файл, содержащий изменения в набор блоков помогут значительно.
