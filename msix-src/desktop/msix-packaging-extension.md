---
description: Сведения о том, как использовать расширение "Упаковка MSIX".
title: Расширение "Упаковка MSIX"
ms.date: 11/5/2020
ms.topic: article
keywords: msix, расширение devops, упаковка, ci/cd, azure devops
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: f4ddb293bcb25fc85c574f9108d399c83877715c
ms.sourcegitcommit: 059f215a0804adeeefeaaa09b376684caa4382eb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2021
ms.locfileid: "98768887"
---
# <a name="msix-packaging-extension"></a>Расширение "Упаковка MSIX"

Расширение *Упаковка MSIX* — это расширение Azure DevOps, которое помогает создавать, упаковывать и подписывать приложения Windows с помощью формата упаковки MSIX.

Рабочие процессы CI/CD стали неотъемлемой частью процесса разработки. Они позволяют повысить эффективность и качество, а также сократить затраты и ускорить выход на рынок. Хотя решение Azure DevOps Pipelines для CI/CD от Майкрософт пользуется популярностью, текущий процесс интеграции рабочих процессов сборки и развертывания для приложений, которые должны упаковываться как MSIX в Azure Pipelines с помощью файлов YAML, является утомительным, особенно для пользователей без большого опыта работы с Azure Pipelines и MSIX. Это расширение Azure DevOps предоставляет простое и интуитивно понятное решение на основе пользовательского интерфейса, которое позволяет автоматизировать процесс сборки и развертывания приложений, упаковываемых в формат MSIX, а также для приложений с существующими рабочими процессами CI/CD, переносимых в формат MSIX, без нарушения их механизмов сборки и развертывания.

Расширение *Упаковка MSIX* содержит следующие задачи, которые можно использовать для настраиваемой сборки конвейера в соответствии с вашими требованиями:

1. **Сборка и упаковка MSIX** — создание и упаковка приложений Windows с помощью формата упаковки MSIX.
2. **Подписывание пакетов MSIX** — подписывание пакетов MSIX с помощью доверенного сертификата.
3. **Файл установщика приложений для MSIX** — создание или обновление файла .appinstaller для приложений MSIX.
4. **Создание пакета для подключения приложения MSIX** — создание пакета VHDX для подключения к приложению MSIX.

## <a name="install-the-extension"></a>Установка расширения

Перейдите в Azure DevOps Marketplace и найдите имя расширения *Упаковка MSIX*.

![Обзор Marketplace](images/msix-packaging-ext/browse-marketplace.png)

## <a name="create-a-pipeline"></a>Создание конвейера

Создайте новый конвейер для проекта Azure DevOps.

![Выбор конвейера](images/msix-packaging-ext/select-pipeline.png)

![Новый конвейер](images/msix-packaging-ext/new-pipeline.png)

Щелкните *Use the classic editor to create a pipeline without YAML* (Использовать классический редактор для создания конвейера без YAML).

![Использование классического редактора](images/msix-packaging-ext/classic-editor.png)

Выберите систему управления версиями и укажите сведения о репозитории и ветви по умолчанию.

![Настройка системы управления версиями](images/msix-packaging-ext/vcs.png)

В разделе *Select a template* (Выбор шаблона), щелкните *start with an **Empty job** _ (Выбрать пустое задание).

![Начало работы с пустым заданием](images/msix-packaging-ext/empty-job.png)

Измените для параметра _Agent Specification* (Спецификация агента) значение ***windows-2019**_, так как расширение MSIX выполняется только в агенте Windows.

![Окно со сведениями о спецификации агента](images/msix-packaging-ext/agent-specification.png)

По умолчанию в конвейере вы должны увидеть _Agent job 1* (Задание агента 1). Щелкните знак плюса, чтобы *добавить задачу в задание агента 1*.

Найдите ***MSIX** _ на панели поиска _Add tasks* (Добавление задач) и вы должны увидеть упомянутые ранее задачи расширения *Упаковка MSIX*. Вы можете выполнить настраиваемую сборку конвейера, добавив необходимые задачи в соответствии с вашими требованиями. Но мы покажем, как настроить все четыре задачи на этой странице.

![Добавление задачи](images/msix-packaging-ext/add-task.png)

### <a name="msix-build-and-package"></a>Сборка и упаковка MSIX

![Задача сборки и упаковки](images/msix-packaging-ext/build-and-package.png)

- **Display name** (Отображаемое имя) — имя задачи.
- **Output Path** (Выходной путь) — выходной путь для пакета MSIX, который будет создан этой задачей. В пути в приведенном выше примере используется [предопределенная переменная](/azure/devops/pipelines/build/variables) **Build.ArtifactStagingDirectory**, которая представляет локальный путь в агенте для хранения артефактов. Она используется здесь для хранения выходных файлов задач, которые позже могут быть опубликованы с помощью задачи публикации артефактов.
- **Build Solution with MSBuild** (Сборка решения с помощью MSBuild) — создание решения с помощью MSBuild для указанной целевой платформы. Не устанавливайте этот флажок, если у вас уже есть двоичные файлы, которые нужно упаковать. Если оставить флажок снятым, вам будет предложено указать путь к двоичным файлам.
- **Project to Build** (Проект для сборки) — укажите путь к файлу проекта или решения, который необходимо создать.
- **Clean before Building** (Очистить перед сборкой) — установите этот флажок, если требуется, чтобы задача выполняла чистую сборку перед сборкой.
- **Generate MSIX Bundle** (Создать пакет MSIX) — установите этот флажок, чтобы создать набор MSIX вместо пакета. Имя выходного файла следует задать в поле **Output Path** (Выходной путь) с расширением .msixbundle вместо .msix.
- **Configuration** (Конфигурация) — выберите вариант *Debug* (Отладка) или *Release* (Выпуск).
- **Platform** (Платформа) — выберите целевую платформу сборки, например *x64*, *x86* или *Any CPU* (Любой ЦП).
- **Update App Version in Manifest** (Обновить версию приложения в манифесте) — установите этот флажок, чтобы изменить версию приложения, указанную в файле .appxmanifest приложения. Это не приведет к перезаписи файла .appxmanifest, но изменит версию приложения в созданном выходном пакете MSIX. Если вы выберете этот вариант, вам будет предложено указать путь к файлу манифеста и номер версии приложения, который необходимо задать для приложения.
- **Application Package Distribution Mode** (Режим распространения пакета приложения) — выберите режим в раскрывающемся меню, чтобы создать пакет приложения для магазина или альтернативных способов распространения.
- **Advanced Options for MSBuild** (Дополнительные параметры для MSBuild) — настройка MSBuild с помощью дополнительных параметров.

### <a name="msix-package-signing"></a>Подписывание пакетов MSIX

![Задача подписывания](images/msix-packaging-ext/signing.png)

- **Display name** (Отображаемое имя) — имя задачи.
- **Package to sign** (Пакет для подписывания) — задача подписывания пакетов MSIX использует средство SignTool для подписывания всех файлов, соответствующих этому пути, независимо от того, являются ли они пакетами или наборами MSIX.
- **Certificate file** (Файл сертификата) — выберите доверенный сертификат, чтобы подписать приложение из раскрывающегося списка, или отправьте файл сертификата с помощью значка шестеренки.
- **Password Variable** (Переменная пароля) — имя переменной, в которой хранится пароль, используемый для доступа к файлу сертификата для подписывания. Обратите внимание, что это НЕ пароль, а имя переменной, которое можно задать в разделе Library (Библиотека).
- **Time Stamp Server** (Сервер меток времени) — URL-адрес сервера меток времени. Этот параметр является необязательным.

### <a name="app-installer-file-for-msix"></a>Файл Установщика приложений для MSIX

![Установщик приложений](images/msix-packaging-ext/app-installer.png)

- **Display name** (Отображаемое имя) — имя задачи.
- **Package** (Пакет) — это путь к пакету или набору, для которого требуется создать Установщик приложений.
- **Output File Path** (Путь к выходному файлу) — путь к файлу Установщика приложений, который необходимо записать.
- **Method to Create App Installer File** (Способ создания файла Установщика приложений) — выберите, следует ли создать новый файл Установщика приложений или обновить существующий. Если вы решили обновить существующий файл, вам будет предложено указать путь к существующему файлу Установщика приложений.
- **Version for App Installer file** (Версия файла Установщика приложений) — номер версии, который будет указан. Требуемый формат: (*основная*).(*дополнительная*).(*сборка*).(*редакция*).
- **URI** — URI веб-сайта перенаправленного файла Установщика приложений.
- **Main Package/Bundle URI** (Основной URI пакета или набора) — URI расположения пакета приложения или набора.
- **Update On Launch** (Обновлять при запуске) — установите этот флажок, чтобы приложение проверяло наличие обновлений при запуске. Если этот флажок установлен, вам будет предложено настроить такие параметры, как *Hours Between Update Checks* (Время в часах между проверками обновлений), *Show UI to User when Updating* (Отображать пользовательский интерфейс для пользователя при обновлении) и *Update to Block App Activation* (Обновлять для блокировки активации приложения).

### <a name="create-package-for-msix-app-attach"></a>Создание пакета для подключения к приложению MSIX

![Подключение к приложению](images/msix-packaging-ext/app-attach.png)

- **Display name** (Отображаемое имя) — имя задачи.
- **Package Path** (Путь к пакету) — путь к пакету или набору MSIX.
- **VHDX Output Path** (Выходной путь VHDX) — путь к VHDX-файлу, который будет создан задачей.
- **VHDX size** (Размер VHDX) — максимальный размер VHDX-файла (в МБ).

После настройки всех задач можно использовать задачу *Публикация артефактов сборки*, чтобы удалить все артефакты из временного расположения для артефактов Azure Pipelines или указанной общей папки.

## <a name="ways-to-provide-feedback"></a>Способы предоставления отзывов

Мы будем рады услышать ваши отзывы о расширении *Упаковка MSIX*. Свяжитесь с нами с помощью следующих каналов:

- Отзывы о расширении в Azure DevOps Marketplace
- [Техническое сообщество MSIX](https://techcommunity.microsoft.com/t5/msix/ct-p/MSIX)
- [Проект GitHub с открытым кодом](https://github.com/microsoft/msix-packaging/tree/master/tools/pipelines-tasks) — исходный код для этого расширения является частью проекта MSIX SDK с открытым кодом. Мы будем рады вашему участию и предложениям.