---
description: В этой статье описаны известные проблемы, которые могут возникнуть при создании пакета MSIX для классического приложения.
title: Известные проблемы с упакованными классическими приложениями
ms.date: 07/29/2019
ms.topic: article
keywords: windows 10, uwp, msix
ms.assetid: 71f8ffcb-8a99-4214-ae83-2d4b718a750e
ms.localizationpriority: medium
ms.openlocfilehash: 2f56cc122f82f2806b0cc1d014c9ab4c14307895
ms.sourcegitcommit: 0412ba69187ce791c16313d0109a5d896141d44c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/20/2019
ms.locfileid: "75303191"
---
# <a name="known-issues-with-packaged-desktop-apps"></a>Известные проблемы с упакованными классическими приложениями

Эта статья содержит известные проблемы, которые могут возникнуть при создании пакета MSIX для классического приложения.

## <a name="you-receive-the-error----msb4018-the-generateresource-task-failed-unexpectedly"></a>Сообщение об ошибке MSB4018, неожиданный сбой задачи GenerateResource

Это может произойти при попытке преобразования вспомогательных сборок в файлы индекса ресурсов пакетов (PRI).

Мы осведомлены об этой проблеме и работаем над ее окончательным решением. В качестве временного решения можно отключить генератор ресурсов, добавив следующую строку XML в первый элемент PropertyGroup в файле вышестоящего проекта:

``<AppxGeneratePrisForPortableLibrariesEnabled>false</AppxGeneratePrisForPortableLibrariesEnabled>``

## <a name="blue-screen-with-error-code-0x139-kernel_security_check_failure"></a>Синий экран с кодом ошибки 0x139 (KERNEL_SECURITY_CHECK_FAILURE)

После установки или запуска определенных приложений из Microsoft Store компьютер может неожиданно перезагрузиться из-за ошибки: **0x139 (безопасность ядра\_\_проверка\_ сбоя)** .

Известно, что эта проблема затрагивает приложения Kodi, JT2Go, Ear Trumpet, Teslagrad и др.

27.10.2016 г. было выпущено [обновление Windows (версия 14393.351 — KB3197954)](https://support.microsoft.com/kb/3197954), в которое вошли важные исправления, направленные на решение этой проблемы. Если вы столкнулись с этой проблемой, обновите свой компьютер. Если вам не удается обновить компьютер, потому что он перезапускается до того, как вам удается войти в систему, восстановите систему до точки более ранней, чем установка одного из затрагиваемых проблемой приложений. О том, как восстановить систему, см. в статье [Параметры восстановления в Windows 10](https://support.microsoft.com/help/12415/windows-10-recovery-options).

Если обновление не устраняет проблему или вы не знаете, как восстановить компьютер, обратитесь в [службу поддержки Microsoft](https://support.microsoft.com/contactus/).

Если вы разработчик, вы можете запретить установку своих упакованных приложений в версиях Windows, в которых нет этого обновления. Обратите внимание, что это приложение будет недоступно для пользователей, которые еще не установили обновление. Чтобы ограничить доступность приложения для пользователей, которые установили это обновление, измените файл AppxManifest. XML следующим образом:

```<TargetDeviceFamily Name="Windows.Desktop" MinVersion="10.0.14393.351" MaxVersionTested="10.0.14393.351"/>```

Подробнее о Центре обновления Windows можно прочитать по следующим ссылкам:
* https://support.microsoft.com/kb/3197954
* https://support.microsoft.com/help/12387/windows-10-update-history

## <a name="common-errors-that-can-appear-when-you-sign-your-app"></a>Распространенные ошибки, которые могут появиться при входе в приложение

### <a name="publisher-and-cert-mismatch-causes-signtool-error-error-signersign-failed--21470248850x8007000b"></a>Несоответствие издателя и сертификата приводит к ошибке Signtool "Error: SignerSign() Failed" (-2147024885/0x8007000b)

Запись издателя в манифесте пакета приложения для Windows должна соответствовать субъекту сертификата, с помощью которого выполняется подписывание.  Вы можете использовать любой из следующих методов для просмотра субъекта сертификата.

**Вариант 1. PowerShell**

Выполните следующую команду PowerShell: В качестве файла сертификата можно использовать как .cer, так и .pfx, так как они содержат идентичные сведения об издателе.

```ps
(Get-PfxCertificate <cert_file>).Subject
```

**Вариант 2. Обозреватель файлов**

Дважды щелкните сертификат в проводнике, выберите вкладку *Сведения*, а затем выберите поле *Субъект* в списке. Скопируйте его содержимое.

**Вариант 3. CertUtil**

Запустите **certutil** из командной строки в PFX-файле и скопируйте поле *subject (тема* ) из выходных данных.

```cmd
certutil -dump <cert_file.pfx>
```

<a id="bad-pe-cert" />

### <a name="bad-pe-certificate-0x800700c1"></a>Сертификат неверного PE (0x800700C1)

Это может произойти, если пакет содержит двоичный файл с поврежденным сертификатом. Вот некоторые из причин, по которым это может произойти:

* Начало сертификата находится не в конце образа.  

* Размер сертификата не положительный.

* Сертификат начинается не после структуры `IMAGE_NT_HEADERS32` для 32-разрядного исполняемого файла или после структуры `IMAGE_NT_HEADERS64` для 64-разрядного исполняемого файла.

* Указатель на сертификат не согласуется должным образом для структуры WIN_CERTIFICATE.

Чтобы найти файлы, содержащие неправильный сертификат PE, откройте **командную строку**и задайте для переменной среды с именем `APPXSIP_LOG` значение 1.

```
set APPXSIP_LOG=1
```

Затем в **командной строке**снова подпишите приложение. Пример

```
signtool.exe sign /a /v /fd SHA256 /f APPX_TEST_0.pfx C:\Users\Contoso\Desktop\pe\VLC.appx
```

В **окне консоли**появится информация о файлах, содержащих недействительный сертификат PE. Пример

```
...

ERROR: [AppxSipCustomLoggerCallback] File has malformed certificate: uninstall.exe

...   
```

## <a name="next-steps"></a>Дальнейшие действия

Есть вопросы? Задайте их на Stack Overflow. Наша команда следит за этими [тегами](https://stackoverflow.com/questions/tagged/project-centennial+or+desktop-bridge). Вы также можете задать нам вопросы [здесь](https://social.msdn.microsoft.com/Forums/en-US/home?filter=alltypes&sort=relevancedesc&searchTerm=%5BDesktop%20Converter%5D).
