---
title: Развертывание предустановленных приложений
description: В этой статье представлены общие сведения для ИТ-специалистов.
ms.date: 07/02/2019
ms.topic: article
author: dianmsft
ms.author: diahar
keywords: windows 10, msix, uwp, дополнительные пакеты, связанные наборы, расширение пакета, visual studio
ms.localizationpriority: medium
ms.openlocfilehash: a743e8e4f960bc50e904b133da07e6fb3feab181
ms.sourcegitcommit: 37bc5d6ef6be2ffa373c0aeacea4226829feee02
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2020
ms.locfileid: "77074240"
---
# <a name="deploying-preinstalled-apps"></a>Развертывание предустановленных приложений 
В этой статье приводятся общие сведения о работе предустановленных приложений, а также о подготовке таких приложений к работе и применении лицензий к ним. 

## <a name="how-preinstalled-apps-work"></a>Как работают предустановленные приложения 

Установку приложения можно разделить на два шага: 
1. Поэтапное создание 
2. Регистрация 

При размещении приложения на платформе она размещает все файлы пакета приложения в файловой системе и устанавливает соответствующие списки управления доступом (ACL). После промежуточного размещения приложение можно зарегистрировать для текущего пользователя. Регистрация заключается в том, что платформа выполняет всю настройку, чтобы сделать приложение доступным для пользователя и интегрировать с операционной системой, например создает пользовательские расположения данных приложения, обеспечивает обнаружение точек расширения приложения, таких как сопоставления типов файлов, и создает плитку приложения. При этом также происходит множество других интересных процессов, но самым важным является то, что каждый пользователь должен быть зарегистрирован, а промежуточное размещение приложения должно выполняться только единожды без каких-либо пользователей. Приложение должно размещаться на платформе только один раз для любого числа пользователей, но для регистрации приложения каждый пользователь должен войти в систему.

Чтобы выполнить предварительную установку приложения для пользователя, платформа по-прежнему должна обеспечивать те же два этапа — промежуточное размещение и регистрацию. Промежуточное размещение — достаточно простой процесс. Его можно выполнить в любое время и даже в автономном режиме в образе Windows до того, как компьютер будет изготовлен. Но для регистрации требуется, чтобы пользователь вошел в систему. При использовании нового компьютера или новой учетной записи нельзя выполнить регистрацию, пока пользователь не войдет в систему впервые. Для завершения предустановки приложение должно быть зарегистрировано на платформе от имени пользователя, когда он войдет в систему. Платформа делает это с помощью системной службы, которой известны все предустановленные приложения, подлежащие регистрации, а затем автоматически активирует регистрацию при первом входе пользователя в систему. Платформа вызывает эту службу для службы готовности приложений, или ARS.

Другими словами, работа с предустановленными приложениями предполагает размещение пакета приложения на диск, а затем его настройку для автоматической регистрации каждого пользователя при следующем входе пользователя в систему.

## <a name="provisioning-apps"></a>Подготовка приложений к работе 
Вся подготовка приложений инкапсулирована в средстве DISM, и она выполняет как настройку промежуточного хранения, так и настройку ARS. Для подготовки ИТ-специалисту требуется пакет приложения (MSIX, MSIXBUNDLE, APPX или APPXBUNDLE) и пакеты зависимостей. 

Список соответствующих команд PowerShell
* **/Get-ProvisionedAppxPackages** — перечисляет все приложения, предварительно установленные в образе.
* **/Add-ProvisionedAppxPackage** — сохраняет в промежуточном хранилище пакет APPX и настраивает его для предварительной установки. Также должны быть предоставлены все зависимости, которые можно найти в SDK или в пакетах, скачанных из хранилища.
* **/Remove-ProvisionedAppxPackage** — можно использовать для удаления предустановленного приложения. Обратите внимание, что эта команда не удаляет приложение, если уже зарегистрированы его пользователи. Она проводит автоматическую регистрацию только в том случае, если приложение не будет автоматически установлено у новых пользователей.  Если пользователи еще не установили приложение, эта команда также удалит промежуточные файлы.

## <a name="licensing"></a>Лицензирование
Лицензирование применяется только при подготовке приложения Магазина Windows. Любые другие приложения можно подготовить к работе без лицензий. Если приложение есть в Магазине, следует предоставить лицензию для компьютера при подготовке приложения к работе. Сейчас все предустановленные приложения для Магазина Windows должны быть бесплатными и настроены для предварительной установки через Центр партнеров Магазина Windows. После настройки пакет и лицензию для предварительной установки можно скачать, а затем разместить в любом образе.

