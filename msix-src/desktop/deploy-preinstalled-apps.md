---
title: Предварительная установка упакованных приложений
description: В этой статье представлены общие сведения для ИТ-специалистов.
ms.date: 04/02/2020
ms.topic: article
author: dianmsft
ms.author: diahar
keywords: windows 10, msix, uwp, дополнительные пакеты, связанные наборы, расширение пакета, visual studio, dism, предустановить, предустановка, упакованные приложения
ms.localizationpriority: medium
ms.openlocfilehash: 100e1b95aae5161a0811459e3dfbee866f7d56a8
ms.sourcegitcommit: 6b1ec6420dbaa327b65c208b4cd00da87985104b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2020
ms.locfileid: "89090102"
---
# <a name="preinstalling-packaged-apps"></a>Предварительная установка упакованных приложений
Существует несколько средств, которые можно использовать для установки упакованного приложения MSIX на устройство для всех пользователей:

- Система обслуживания образов развертывания и управления ими (DISM)
- Пакеты подготовки
- PowerShell

В этой статье приводятся общие сведения о работе предустановленных приложений, а также о подготовке таких приложений к работе и применении лицензий к ним. 

## <a name="overview"></a>Обзор
Предварительную установку к установке упакованных приложений можно разделить на два этапа: 
1. Поэтапное создание
1. Регистрация

### <a name="staging"></a>Поэтапное создание
Поэтапное создание упакованного приложения на устройстве — это процесс сохранения копии упакованного приложения в локальную файловую систему. Упакованное приложение можно размещать только один раз, и его можно выполнять без существующих учетных записей пользователей на устройстве.

Поэтапное создание упакованного приложения можно выполнять в автономном образе (.wim, .vhd, or .vhdx) или на активной операционной системе, работающей в режиме онлайн. 

### <a name="registration"></a>Регистрация
После промежуточного создания упакованного приложения его можно зарегистрировать для пользователей на устройстве. Регистрация выполняется отдельно для каждого пользователя и начинается при входе пользователя устройства в систему. Затем операционная система загрузит предустановленный пакет приложений, создающий пользовательские данные приложения, создаст сопоставления типов файлов и плитки приложений в меню "Пуск". Это достигается благодаря службе App Rediness Service (ARS), которая учитывает все предварительно установленные приложения. 

## <a name="dism"></a>DISM
DISM — это программа командной строки, которую можно использовать для обслуживания и подготовки образов Windows, включая образы для Windows Pre-Execution (Win-PE), среды восстановления Windows (Win-RE) и программы установки Windows. Dism можно использовать для обслуживания образа Windows (.wim) или виртуального жесткого диска (.vhd, или .vhdx).

## <a name="provisioning-packages"></a>Пакеты подготовки
Вся подготовка приложений инкапсулирована в средстве DISM, и она выполняет как настройку промежуточного хранения, так и настройку ARS. Для подготовки ИТ-специалисту требуется пакет приложения (MSIX, MSIXBUNDLE, APPX или APPXBUNDLE) и пакеты зависимостей. 

Начиная с версии Windows 10 1809, ИТ-профессионалы могут предварительно установить приложение с помощью подготовки. Подготовленные приложения будут установлены в центральное расположение — %ProgramFiles%\WindowsApps и будут сразу же доступны зарегистрированным пользователям. Доступ к приложению будут иметь только пользователи с пакетом приложения MSIX, зарегистрированным в их учетной записи.

В Windows 10 2004 во время переподготовки подготовленное упакованное приложение будет переустановлено. Предыдущие версии Windows 10 препятствуют переустановке этих упакованных приложений, если пользователь ранее удалил упакованное приложение.

## <a name="powershell"></a>PowerShell
Список соответствующих команд PowerShell
* **[Get-ProvisionedAppxPackages](/powershell/module/dism/get-appxprovisionedpackage?view=win10-ps)**  — перечисляет все приложения, предварительно установленные в образе.
* **[Add-ProvisionedAppxPackage](/powershell/module/dism/add-appxprovisionedpackage?view=win10-ps)**  — сохраняет в промежуточном хранилище пакет APPX и настраивает его для предварительной установки. Также должны быть предоставлены все зависимости, которые можно найти в SDK или в пакетах, скачанных из хранилища.
* **[Remove-ProvisionedAppxPackage](/powershell/module/dism/remove-appxprovisionedpackage?view=win10-ps)**  — можно использовать для удаления предустановленного приложения. Обратите внимание, что эта команда не удаляет приложение, если уже зарегистрированы его пользователи. Она проводит автоматическую регистрацию только в том случае, если приложение не будет автоматически установлено у новых пользователей.  Если пользователи еще не установили приложение, эта команда также удалит промежуточные файлы.

## <a name="licensing"></a>Лицензирование
Лицензирование применяется только при подготовке приложения Магазина Windows. Любые другие приложения можно подготовить к работе без лицензий. Если приложение есть в Магазине, следует предоставить лицензию для компьютера при подготовке приложения к работе. Сейчас все предустановленные приложения для Магазина Windows должны быть бесплатными и настроены для предварительной установки через Центр партнеров Магазина Windows. После настройки пакет и лицензию для предварительной установки можно скачать, а затем разместить в любом образе.