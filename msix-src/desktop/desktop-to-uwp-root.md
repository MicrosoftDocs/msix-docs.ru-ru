---
description: В этой статье описывается комплексный процесс создания современного пакета приложения Windows 10 для существующего Windows Forms, WPF или приложения или игры Win32.
title: Упаковка классических приложений
ms.date: 07/29/2019
ms.topic: article
keywords: windows 10, uwp, msix
ms.assetid: 74373c24-f948-43bb-aa85-01e2e8e87162
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: fc70cab0074087d7ae2d2ea123ed9b41bfdac8ea
ms.sourcegitcommit: d749fa662214bddaa6854f1ee95761c547db8dae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2019
ms.locfileid: "75008094"
---
# <a name="package-desktop-applications-msix"></a>Упаковка классических приложений (MSIX)

Воспользуйтесь существующим настольным приложением и добавьте современные возможности для пользователей Windows 10. После этого вы сможете охватить международные рынки путем распространения приложения через Microsoft Store. Вы можете монетизации приложения гораздо проще, используя функции, встроенные непосредственно в магазин. Конечно, вам не нужно использовать магазин. Вы можете использовать существующие каналы.

При создании пакета MSIX для классического приложения приложение получает удостоверение и с этим удостоверением, настольное приложение имеет доступ к интерфейсам API универсальной платформы Windows (UWP). Их можно использовать для активации современных и привлекательных возможностей, таких как живые плитки и уведомления. Используйте простые проверки условной компиляции и среды выполнения для запуска кода UWP только в том случае, если приложение работает в Windows 10.

Помимо кода, используемого для облегчения работы с Windows 10, приложение остается неизменным, и его можно по-прежнему передавать пользователям в предыдущих версиях Windows. В Windows 10 приложение продолжит работать в пользовательском режиме с полным доверием точно так же, как и сегодня.

## <a name="prepare"></a>Подготовка

Сначала подготовьте приложение, просмотрев статью [Подготовка к упаковке классического приложения](desktop-to-uwp-prepare.md), а затем устраните все проблемы, которые относятся к приложению, прежде чем создавать для него пакет приложения Windows. Перед созданием пакета может не потребоваться внести много изменений в приложение. Однако в некоторых ситуациях может потребоваться настроить приложение перед созданием для него пакета.

<a id="convert" />

## <a name="package"></a>Упаковка

Существует несколько различных способов создания пакета MSIX для классического приложения.

### <a name="build-an-msix-from-an-existing-app-installer"></a>Создание MSIX из существующего установщика приложений

Если у вас уже есть пакет приложения (например, установщик MSI или App-V), мы рекомендуем использовать [средство упаковки MSIX](../mpt-overview.md) для повторного упаковки существующего приложения в формат MSIX. Оно включает интерактивный пользовательский интерфейс и командную строку для преобразования, позволяя преобразовывать приложения без использования исходного кода. 

Более раннее средство с именем [конвертера классических приложений](desktop-to-uwp-run-desktop-app-converter.md) также доступно для переупаковки существующего пакета приложений для настольных систем. Однако это средство устарело, поэтому вместо него рекомендуется использовать средство упаковки MSIX.

В следующей таблице приведены поддерживаемые версии Windows 10 и форматы пакетов для этих средств.

|  Инструмент  | Поддерживаемые версии ОС для создания пакетов  | Поддерживаемые версии ОС для установленных пакетов  |  Поддерживаемые форматы пакетов  |
|-----------------------------|-----------------------------------------------|-----------------------------------------------|-----------------------------|
|  [Средство упаковки MSIX](../mpt-overview.md)        |  Windows 10, версия 1809 и более поздние           | Windows 10, версия 1709 и более поздние версии            |  только msix                 |
|  [Конвертор классических приложений](desktop-to-uwp-run-desktop-app-converter.md)        |  Windows 10 (версия 1607 или выше)           | Windows 10 (версия 1607 или выше)            |  только Appx    |

Чтобы приступить к работе с инструментом упаковки MSIX, см. следующие статьи:

* [Создание пакета MSIX из установщика настольных систем (MSI, EXE или App-V) на виртуальной машине](../packaging-tool/create-app-package-msi-vm.md)
* [Создание пакета MSIX со всеми другими типами установщиков](../packaging-tool/create-other-installer.md)
* [Создание пакета MSIX с помощью командной строки](../packaging-tool/package-conversion-cli.md)

### <a name="build-an-msix-from-source-code-using-visual-studio"></a>Создание MSIX из исходного кода с помощью Visual Studio

Если вы сопровождаете приложение с помощью Visual Studio и оно не имеет установщика или ваш установщик не выполняет большого количества сложных задач, попробуйте использовать Visual Studio.

Visual Studio упрощает создание пакета. Добавьте в решение **проект пакета приложения Windows** , сослаться на проект рабочего стола, а затем нажмите клавишу F5 для отладки приложения. Далее перечислены несколько дополнительных возможностей.

:heavy_check_mark: Автоматическое создание визуальных ресурсов;

:heavy_check_mark: Внесение изменений в манифест с помощью визуального конструктора;

:heavy_check_mark: Создание пакета с использованием мастера;

: heavy_check_mark: простое назначение удостоверений для приложения из имени, которое вы уже зарезервировано в [центре партнеров](https://partner.microsoft.com/dashboard).

Инструкции см. [в разделе Упаковка приложения для настольных компьютеров с помощью Visual Studio](desktop-to-uwp-packaging-dot-net.md). В следующей таблице приведены поддерживаемые версии форматов Visual Studio, Windows 10 и пакетов.

|  Совместимые версии Visual Studio | Поддерживаемые версии ОС для создания пакетов  | Поддерживаемые версии ОС для установленных пакетов  |  Поддерживаемые форматы пакетов  |
|-----------------------------|-----------------------------------------------|-----------------------------------------------|-----------------------------|
|  Visual Studio 2019<br/>Visual Studio 2017 15,5 и более поздние версии       |  Windows 10 (версия 1607 или выше)           |  Windows 10 (версия 1607 или выше)            |  . msix (для Windows 10, версия 1709 и более поздние)<br/>appx (для Windows 10, версия 1607 и более поздние)                 |

### <a name="third-party-installers"></a>Сторонние установщики

Несколько популярных продуктов и установщиков сторонних производителей теперь поддерживают возможность упаковки настольных приложений. Дополнительные сведения и список этих продуктов сторонних производителей см. в разделе [Упаковка приложения для настольных компьютеров с помощью сторонних установщиков](desktop-to-uwp-third-party-installer.md).

### <a name="manual-packaging"></a>Упаковка вручную

В качестве окончательного варианта можно преобразовать приложение без использования каких-либо из этих средств. Если вы предпочитаете детальный контроль над преобразованием, можно создать файл манифеста и затем запустить средство **MakeAppx.exe**, чтобы создать пакет приложения для Windows.

См. раздел [Упаковка приложения для настольных систем вручную](desktop-to-uwp-manual-conversion.md).

## <a name="add-modern-windows-10-experiences"></a>Добавление современных возможностей Windows 10

После создания пакета MSIX для классического приложения можно использовать интерфейсы API UWP, расширения пакетов и компоненты UWP, чтобы создавать современные и привлекательные возможности Windows 10, такие как динамические плитки и уведомления.

### <a name="enhance-with-uwp-apis"></a>Улучшение с помощью API UWP

После упаковки приложения вы можете улучшить его с помощью таких функций, как живые плитки и push-уведомления. Некоторые из этих возможностей могут значительно повысить уровень взаимодействия вашего приложения, а также затраты на их добавление. Для некоторых возможностей требуется добавить небольшой код.

См. статью [Использование API-интерфейсов UWP в классических приложениях](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-enhance).

### <a name="integrate-with-package-extensions"></a>Интеграция с использованием расширений пакета

Если приложение должно интегрироваться с системой (например, установить правила брандмауэра), опишите эти вещи в манифесте пакета приложения, и система сделает все остальное. Для большинства этих задач вам вообще не придется писать код. С небольшой XML-кодом в манифесте можно выполнять такие действия, как запуск процесса при входе пользователя в систему, интегрировать приложение в проводник и добавить в приложение список целевых объектов печати, которые отображаются в других приложениях.

См. раздел [интеграция приложения для настольных систем с расширениями пакетов](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-extensions).

### <a name="extend-with-uwp-components"></a>Расширение возможностей с помощью компонентов UWP

Некоторые возможности Windows 10, такие как страницы с подходящим для сенсорного ввода интерфейсом, должны выполняться внутри современного контейнера приложения. Как правило, сначала необходимо определить, можно ли добавить ваше взаимодействие путем [усовершенствования](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-enhance) существующего классического приложения с помощью API-интерфейсов UWP. Если необходимо использовать компонент UWP для достижения опыта работы, можно добавить проект UWP в решение и использовать службы приложений для взаимодействия между настольным приложением и компонентом UWP.

См. статью [расширение классического приложения с помощью компонентов UWP](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-extend).

## <a name="test"></a>Тестирование

Чтобы протестировать приложение в реальной настройке при подготовке к распространению, лучше подписать приложение и установить его. См. [Тестирование приложения](desktop-to-uwp-debug.md#test-your-app).

>[!IMPORTANT]
> Если вы планируете опубликовать приложение на Microsoft Store, убедитесь, что приложение работает правильно на устройствах под управлением Windows 10 в режиме S. Это требование к хранению. См. [Тестирование приложения для Windows 10 в S-режиме](desktop-to-uwp-test-windows-s.md).

## <a name="validate"></a>Проверить

Чтобы приложение было лучше Опубликовано на Microsoft Store или стать [сертифицированным для Windows](https://go.microsoft.com/fwlink/p/?LinkID=309666), проверьте и протестируйте его локально перед отправкой на сертификацию.

Если вы используете приложение уровня данных для упаковки приложения, можно использовать новый флаг ``-Verify``, чтобы проверить пакет на соответствие требованиям к упакованным приложениям и магазинам. См. раздел [Упаковка приложения, подписание приложения и подготовка к отправке хранилища](desktop-to-uwp-run-desktop-app-converter.md#optional-parameters).

Если вы используете Visual Studio, вы можете проверить приложение с помощью мастера **создания пакетов приложений** . См. раздел [Создания файла пакета отправки приложения](../package/packaging-uwp-apps.md#create-an-app-package-upload-file).

Чтобы запустить средство вручную, см. раздел [Комплект сертификации приложений для Windows](/windows/uwp/debug-test-perf/windows-app-certification-kit).

Чтобы ознакомиться со списком тестов, используемых в комплекте сертификации приложений для Windows для проверки вашего приложения, см. раздел [Тесты для приложения, перенесенного из классического приложения для Windows](/windows/uwp/debug-test-perf/windows-desktop-bridge-app-tests).

## <a name="distribute"></a>Распространение

Вы можете распространять приложение, опубликовав его Microsoft Store или с помощью неопубликованных приложений на других системах.

См. раздел [распространение упакованного](/windows/apps/desktop/modernize/desktop-to-uwp-distribute)классического приложения.

## <a name="support-and-feedback"></a>Поддержка и отзывы

**Поиск ответов на вопросы**

Есть вопросы? Задайте их на Stack Overflow. Наша команда следит за этими [тегами](https://stackoverflow.com/questions/tagged/project-centennial+or+desktop-bridge). Вы также можете задать нам вопросы [здесь](https://social.msdn.microsoft.com/Forums/home?filter=alltypes&sort=relevancedesc&searchTerm=%5BDesktop%20Converter%5D).

**Отправьте отзыв или получите предложения по функциям**

См. раздел [UserVoice](https://wpdev.uservoice.com/forums/110705-universal-windows-platform/category/161895-desktop-bridge-centennial)
