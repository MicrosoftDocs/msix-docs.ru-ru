---
description: В этой статье описывается весь процесс создания современных пакетов приложений для Windows 10 для существующих приложений и игр Windows Forms, WPF, а также Win32.
title: Упаковка классических приложений
ms.date: 07/29/2019
ms.topic: article
keywords: windows 10, uwp, msix
ms.assetid: 74373c24-f948-43bb-aa85-01e2e8e87162
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: bf8ca8e769683ac2c66f558ef4e85f36671d42ce
ms.sourcegitcommit: 37bc5d6ef6be2ffa373c0aeacea4226829feee02
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2020
ms.locfileid: "77072614"
---
# <a name="package-desktop-applications-msix"></a>Упаковка классических приложений (MSIX)

Перенесите свои существующие классические приложения и добавьте в них современные способы взаимодействия для пользователей Windows 10. После этого вы сможете охватить международные рынки путем распространения приложения через Microsoft Store. Монетизировать приложение можно гораздо более простыми способами с помощью функций, представленных в Store. Конечно, использовать Store не обязательно. Вы можете использовать существующие каналы.

При создании пакета MSIX ваше классическое приложение получает идентификатор, который можно использовать для доступа к API универсальной платформы Windows (UWP). Эти API позволяют реализовать современные и привлекательные возможности, такие как живые плитки и уведомления. Используйте простую условную компиляцию и проверку во время выполнения для кода UWP только в том случае, если ваше приложение работает в Windows 10.

Помимо кода, который используется для внедрения возможностей Windows 10, ваше приложение остается неизменным, и можно продолжать распространять его среди пользователей предыдущих версий. В Windows 10 ваше приложение продолжит работу в режиме полного доверия так же, как и сейчас.

## <a name="prepare"></a>Подготовка

Сначала подготовьте приложение, ознакомившись со статьей [Prepare to package your desktop app](desktop-to-uwp-prepare.md) (Подготовка классического приложения к упаковке) и устранив все проблемы, применимые к вашему приложению, после чего можно будет создать соответствующий пакет приложения для Windows. Возможно, для создания пакета в приложение не придется вносить никакие изменения. Однако в некоторых ситуациях для создания пакета для приложения может потребоваться его предварительная оптимизация.

<a id="convert" />

## <a name="build-an-msix-from-source-code-using-visual-studio"></a>Создание файла MSIX на основе исходного кода в Visual Studio

Если вы сопровождаете приложение с помощью Visual Studio и у него нет установщика или установщик не выполняет большое количество сложных задач, попробуйте использовать Visual Studio.

Visual Studio упрощает создание пакета. Добавьте **проект пакета приложения Windows** в решение, создайте ссылку на проект своего классического приложения, а затем нажмите клавишу F5 для отладки приложения. Далее перечислены несколько дополнительных возможностей.

:heavy_check_mark: Автоматическое создание визуальных ресурсов

:heavy_check_mark: Внесение изменений в манифест с помощью визуального конструктора

:heavy_check_mark: Создание пакета с использованием мастера

:heavy_check_mark: Простое назначение приложению идентификатора на основе имени, уже зарезервированного в [Центре партнеров](https://partner.microsoft.com/dashboard).

Инструкции см. в статье [Package a desktop application by using Visual Studio](desktop-to-uwp-packaging-dot-net.md) (Упаковка классического приложения с помощью Visual Studio). В таблице ниже приведены поддерживаемые версии Visual Studio, Windows 10 и форматы пакетов.

|  Поддерживаемые версии Visual Studio | Поддерживаемые версии ОС для создания пакетов  | Поддерживаемые версии ОС для установленных пакетов  |  Форматы пакетов приложений  |
|-----------------------------|-----------------------------------------------|-----------------------------------------------|-----------------------------|
|  Visual Studio 2019<br/>Visual Studio 2017 15.5 и более поздних версий       |  Windows 10 версии 1607 и более поздних версий           |  Windows 10 версии 1607 и более поздних версий            |  MSIX (для Windows 10 версии 1709 и более поздних версий)<br/>APPX (для Windows 10 версии 1607 и более поздних версий)                 |


## <a name="add-modern-windows-10-experiences"></a>Добавление современных возможностей для Windows 10

После создания пакета MSIX для классического приложения можно использовать API UWP, пакетные расширения и компоненты UWP, чтобы наделить приложение современными и привлекательными возможностями Windows 10, такими как живые плитки и уведомления.

### <a name="enhance-with-uwp-apis"></a>Улучшение с помощью API UWP

После упаковки приложения вы можете улучшить его с помощью таких функций, как живые плитки и push-уведомления. Некоторые из этих возможностей могут значительно повысить уровень вовлечения для вашего приложения, и они стоят того, чтобы потратить немного времени на их добавление. Для некоторых возможностей требуется добавить небольшой код.

Дополнительные сведения см. в статье [Use UWP APIs in desktop applications](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-enhance) (Использование API UWP в классических приложениях).

### <a name="integrate-with-package-extensions"></a>Интеграция с использованием расширений пакета

Если ваше приложение должно интегрироваться с системой (например, для установки правил брандмауэра), опишите эти требования в манифесте пакета вашего приложения, а все остальное система сделает сама. Для большинства этих задач вам вообще не придется писать код. Используя небольшой объем разметки XML в манифесте, можно выполнять такие действия, как запуск процесса при входе пользователя в систему, интеграция приложения в проводник и добавление вашего приложения в список целевых объектов, которые отображаются в других приложениях.

Дополнительные сведения см. в статье [Integrate your desktop application with package extensions](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-extensions) (Интеграция пакетных расширений в классическое приложение).

### <a name="extend-with-uwp-components"></a>Расширение возможностей с помощью компонентов UWP

Некоторые возможности Windows 10, такие как страницы с подходящим для сенсорного ввода интерфейсом, должны выполняться внутри современного контейнера приложения. Как правило, сначала необходимо определить, можно ли добавить возможность путем [усовершенствования](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-enhance) существующего классического приложения с помощью API UWP. Если вам требуется использовать компонент UWP для достижения результата, можно добавить в решение проект UWP и использовать службы приложений для обмена данными между классическим приложением и компонентом UWP.

Дополнительные сведения см. в статье [Extend your desktop app with modern UWP components](https://docs.microsoft.com/windows/apps/desktop/modernize/desktop-to-uwp-extend) (Улучшение классических приложений с помощью компонентов UWP).

## <a name="test"></a>Тест

Чтобы протестировать приложение в реалистичной среде во время подготовки к распространению, лучше всего подписать приложение и затем установить его. Дополнительные сведения см. в разделе [Тестирование приложения](desktop-to-uwp-debug.md#test-your-app).

>[!IMPORTANT]
> Если вы планируете опубликовать приложение в Microsoft Store, проверьте исправность его работы на устройствах под управлением Windows 10 в S-режиме. Это требование магазина. Дополнительные сведения см. в статье [Test your Windows app for Windows 10 in S mode](desktop-to-uwp-test-windows-s.md) (Тестирование приложения для Windows 10 в S-режиме).

## <a name="validate"></a>Проверить

Чтобы максимально повысить шансы вашего приложения на публикацию в Microsoft Store или получение статуса [Сертифицировано для Windows](https://go.microsoft.com/fwlink/p/?LinkID=309666), проверьте и протестируйте приложение локально, прежде чем отправлять его на сертификацию.

Если для упаковки приложения используется приложение уровня данных, вы можете указать новый флаг ``-Verify``, чтобы проверить ваш пакет на соответствие требованиям для классических приложений и Store. Дополнительные сведения см. в разделе об [упаковке, подписании и подготовке приложения для отправки в Store](desktop-to-uwp-run-desktop-app-converter.md#optional-parameters).

Если вы используете Visual Studio, можно проверить приложение из мастера **Создание пакетов приложения**. Дополнительные сведения см. в разделе о [создании файла отправки пакета приложения](../package/packaging-uwp-apps.md#generate-an-app-package-upload-file-for-store-submission).

Сведения о том, как запустить средство вручную, см. в статье [Комплект сертификации приложений для Windows](/windows/uwp/debug-test-perf/windows-app-certification-kit).

Чтобы ознакомиться со списком тестов, используемых в комплекте сертификации приложений для Windows для проверки вашего приложения, см. статью [Тесты для приложения, перенесенного из классического приложения для Windows](/windows/uwp/debug-test-perf/windows-desktop-bridge-app-tests).

## <a name="distribute"></a>Распространение

Вы можете распространять свое приложение, опубликовав его в Microsoft Store или загружая его на другие системы в неопубликованном виде.

См. статью [Распространение упакованного классического приложения (мост для классических приложений)](/windows/apps/desktop/modernize/desktop-to-uwp-distribute)

