---
title: Устранение неполадок при установке с помощью файла Установщика приложений
description: Распространенные проблемы при загрузке неопубликованных приложений с помощью файла установщика приложений.
ms.date: 5/2/2018
ms.topic: article
keywords: windows 10, uwp, установщик приложений, AppInstaller, загрузка неопубликованного приложения
ms.localizationpriority: medium
ms.custom: RS5
ms.openlocfilehash: 99f38075d1ad586186261bfb9c39e7f3253ed05e
ms.sourcegitcommit: f1c366459764cf1f3c0bc9edcac4f845937794bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/04/2020
ms.locfileid: "87754548"
---
# <a name="troubleshoot-installation-issues-with-the-app-installer-file"></a>Устранение неполадок при установке с помощью файла Установщика приложений

При возникновении любых проблем с установкой приложения из файла установщика приложения воспользуйтесь советами по диагностике и устранению неполадок из этого раздела.

## <a name="prerequisites"></a>Предварительные требования

Чтобы иметь возможность загрузки неопубликованных приложений в Windows 10, устройство пользователя должно удовлетворять следующим требованиям:

- На устройстве необходимо включить режим разработчика или загрузку неопубликованных приложений. Подробнее об этом см. в разделе [Включение устройства для разработки](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development).
- Сертификат, используемый для подписи пакета, должен быть доверенным сертификатом на устройстве. См. дополнительные сведения в разделе **Доверенные сертификаты** ниже.
- Версия Windows 10 должна поддерживать схему файла `.appinstaller` и протокол распространения.

## <a name="common-issues"></a>Распространенные проблемы

Существуют некоторые распространенные проблемы при первой загрузке неопубликованного приложения на машине пользователя. В следующих разделах описаны наиболее распространенные проблемы и их решения.

### <a name="windows-version"></a>Версия Windows

В каждом выпуске Windows 10 повышается удобство загрузки неопубликованных приложений, и в таблице ниже указано, какие функции доступны в каждом основном выпуске. Если вы попытаетесь загрузить неопубликованное приложение, используя метод, который не поддерживается в вашей версии Windows 10, возникнет ошибка развертывания.

| Версия | Примечания о загрузке неопубликованных приложений |
|---------|----------------|
| Сборка 17134 (обновление от апреля 2018 г., версия 1803)    | Файл `.appinstaller` также доступен в папках UNC и общих папках. Также доступны настраиваемые проверки обновлений. |
| Сборка 16299 (Fall Creators Update, версия 1709) | Впервые представлен файл `.appinstaller`, отвечающий за автоматические обновления приложения. Эта версия поддерживает только конечные точки HTTP. Проверки обновлений не настраиваются и происходят каждые 24 часа. |
| Сборка 15063 (Creators Update, версия 1703)      | Установщик приложений может скачивать зависимости приложений (только в режиме выпуска) из Store. |
| Сборка 14393 (Юбилейное обновление, версия 1607)   | Представлено приложение "Установщик приложений" для установки файлов .appx и .appxbundle, файл .appinstaller не поддерживается. |
| Сборка 10586 (ноябрьское обновление, версия 1511)      | Загрузка неопубликованных приложений доступна только через PowerShell с использованием команды [Add-AppxPackage](https://docs.microsoft.com/powershell/module/appx/add-appxpackage?view=win10-ps). |
| Сборка 10240 (Windows 10, версия 1507)           | Загрузка неопубликованных приложений доступна только через PowerShell с использованием команды [Add-AppxPackage](https://docs.microsoft.com/powershell/module/appx/add-appxpackage?view=win10-ps). |

### <a name="trusted-certificates"></a>Доверенные сертификаты

Пакеты приложений должны быть подписаны сертификатом, который является доверенным для устройства. Сертификаты, предоставляемые общими центрами сертификации, являются доверенными по умолчанию в операционной системе Windows.

Однако если сертификат, используемый для подписи пакета приложения, не является доверенным или является локально созданным или самозаверяющим сертификатом, используемым во время разработки, установщик приложения может сообщить о том, что пакет не является доверенным и не позволит установить его.

![MSIX, подписанный с помощью отсутствующего или ненадежного сертификата](..\images\msix-bad-cert.png)

Чтобы решить эту проблему, пользователь с правами локального администратора на устройстве должен использовать средство **сертификатов компьютера** для импорта сертификата в один из следующих контейнеров:

1. Локальный компьютер: доверенные лица
2. Локальный компьютер: доверенные корневые центры (не рекомендуется)

>[!IMPORTANT]
> **Не импортируйте сертификаты подписи пакетов в хранилище сертификатов пользователя**. Установщик приложения не выполняет поиск сертификатов пользователей при проверке удостоверения пакета.

Средство управления сертификатами компьютера можно легко найти, выполнив поиск в меню "Пуск":

![Поиск средства "сертификаты локального компьютера" в меню "Пуск"](..\images\start-comp-cert.png)

После успешного импорта сертификата для подписи повторное выполнение установщика приложения покажет, что пакет является доверенным и может быть установлен:

![MSIX, подписанный доверенным сертификатом](..\images\msix-good-cert.png)

### <a name="dependencies-not-installed"></a>Зависимости, которые не устанавливаются

Приложения Windows 10 могут иметь зависимости платформы на основе платформы приложений, используемой для создания приложения. Если вы используете C# или Visual Basic, приложение потребует среду выполнения .NET и пакеты .NET Framework. Приложения C++ требуют VCLib.

>[!IMPORTANT]
> Если пакет приложения создан в конфигурации режима выпуска, зависимости платформы будут взяты из Microsoft Store. Однако если приложение создано в конфигурации режима отладки, зависимости будут получены из местоположения, указанного в файле `.appinstaller`.

### <a name="files-not-accessible"></a>Файл не доступен

При установке из конечной точки HTTP необходимо убедиться, что все файлы доступны с правильным типом MIME. Самый простой способ проверить эти файлы — пройти по ссылкам на странице HTML, созданной Visual Studio. Необходимо проверить эти файлы:

- `.appinstaller`файл, доступный в виде`application/xml`
- `.appx`и `.appxbundle` файлы, доступные как`application/vns.ms-appx`

## <a name="isolate-app-installer-app-issues"></a>Изоляция проблем установщика приложений

Если установщик приложения не может установить приложение, эти действия помогут определить проблемы установки.

### <a name="verify-app-package-file-installation"></a>Проверка установки файла пакета приложения

- Скачайте файл пакета приложения в локальную папку и попытайтесь установить его с помощью команды PowerShell [Add-AppxPackage](https://docs.microsoft.com/powershell/module/appx/add-appxpackage?view=win10-ps) .

- Скачайте файл `.appinstaller` и сохраните его в локальную папку. Попробуйте установить его с помощью команды PowerShell `Add-AppxPackage -Appinstaller`.

### <a name="app-installer-event-logs"></a>Журналы событий установщика приложений

Инфраструктура развертывания приложений создает журналы, которые часто используются для отладки проблем с установкой с помощью Просмотр событий Windows.`Application and Services Logs -> Microsoft -> Windows -> AppxDeployment-Server`
