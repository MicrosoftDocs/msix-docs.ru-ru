---
title: Пакеты приложений на основе плоских пакетов
description: Описывает создание плоского пакета, связывающего файлы пакета .appx вашего приложения со ссылками на пакеты приложений.
ms.date: 07/02/2019
author: dianmsft
ms.author: diahar
ms.topic: article
keywords: Windows 10, msix, упаковка, конфигурация пакета, плоский пакет
ms.localizationpriority: medium
ms.openlocfilehash: a1e06484476c82a856da6ad4713ef6bdcac0e051
ms.sourcegitcommit: 8a75eca405536c5f9f7c4fd35dd34c229be7fa3e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/31/2019
ms.locfileid: "68690023"
---
# <a name="flat-bundle-app-packages"></a>Пакеты приложений на основе плоских пакетов 

> [!IMPORTANT]
> Если вы планируете отправить приложение в Store, необходимо обратиться в [службу поддержки разработчиков Windows](https://developer.microsoft.com/windows/support) и получить разрешение на использование плоских пакетов.

Неструктурированные пакеты — это улучшенный способ объединения файлов пакета приложения. Типичный файл набора приложений Windows использует многоуровневую структуру упаковки, в которой файлы пакета приложения должны содержаться в пакете, неструктурированные пакеты удаляют эту потребность, добавляя только ссылки на файлы пакета приложения, что позволяет им находиться за пределами набора приложений. Поскольку файлы пакета приложения больше не содержатся в пакете, они могут быть параллельно обработаны, что приводит к уменьшению времени отправки, более быстрой публикации (так как каждый файл пакета приложения может обрабатываться одновременно) и в конечном итоге ускоряет разработку. итераций.

![Схема плоского пакета](images/bundle-combined.png)

Еще одним преимуществом плоских пакетов является потребность в создании меньшего числа пакетов. Так как на файлы пакета приложения есть ссылки, две версии приложения могут ссылаться на один и тот же файл пакета, если пакет не был изменен по двум версиям. Это позволяет при создании пакетов для следующей версии вашего приложения создавать только изменившиеся пакеты приложений.
По умолчанию плоские пакеты будут ссылаться на файлы пакета приложения в той же папке, что и сам. Однако эту ссылку можно изменить, указав другие пути (относительные пути, сетевые папки и расположения http). Для этого необходимо напрямую указать **BundleManifest** при создании плоского пакета. 

## <a name="how-to-create-a-flat-bundle"></a>Как создать плоский пакет

Плоский пакет можно создать с помощью инструмента MakeAppx.exe или с помощью макета упаковки, чтобы определить структуру пакета.

### <a name="using-makeappxexe"></a>Использование MakeAppx.exe

Чтобы создать плоский пакет с помощью программе makeappx. exe, используйте команду "программе makeappx. exe" в обычном режиме, но с параметром/ФБ для создания файла плоского пакета приложений (который будет очень мал, так как он содержит только ссылки на файлы пакета приложения и не содержит фактических полезных данных). ). 

Ниже приводится пример синтаксиса команды:

```syntax
MakeAppx bundle [options] /d <content directory> /fb /p <output flat bundle name>
```

Дополнительные сведения об использовании MakeAppx.exe см. в разделе [Создание пакета приложения с помощью инструмента MakeAppx.exe](create-app-package-with-makeappx-tool.md).

### <a name="using-packaging-layout"></a>Использование макета упаковки

Кроме того, создать плоский пакет можно с помощью макета упаковки. Для этого задайте для атрибута **FlatBundle** значение **true** в элементе **PackageFamily** Манифеста пакета приложения. Чтобы узнать больше о макете упаковки, см. раздел [Создание пакета с использованием макета упаковки](packaging-layout.md).

## <a name="how-to-deploy-a-flat-bundle"></a>Развертывание плоского пакета 

Перед развертыванием неструктурированного пакета все пакеты приложений (в дополнение к набору приложений) должны быть подписаны одним и тем же сертификатом. Это связано с тем, что все файлы пакета приложения (. appx/. msix) теперь являются независимыми файлами и больше не содержатся в файле пакета приложений (. appxbundle/. msixbundle).

После подписания пакетов можно установить приложение с помощью одного из следующих параметров:
* Дважды щелкните файл пакета приложений, чтобы установить его с помощью установщика приложений.
* Используйте [командлет Add-AppxPackage](https://docs.microsoft.com/powershell/module/appx/add-appxpackage?view=win10-ps) в PowerShell и укажите файл пакета приложений (предполагая, что пакеты приложений находятся в том месте, где их предполагает пакет приложений). 

Вы не можете развертывать отдельные пакеты. appx/. msix неструктурированного пакета сами по себе. Они должны быть развернуты с помощью. appxbundle/. msixbundle. Однако можно обновить отдельные пакеты. appx/. msix из неструктурированного пакета после первоначальной установки. 

Например, если плоский пакет версии 1 состоит из msixbundle, x86. msix, x64. msix и Asset. msix, и известно, что пакет v2 содержит только изменения пакета ресурсов, необходимо только создать. msixbundle и ресурс. msix, чтобы иметь возможность установить e Update. Необходимо создать msixbundle для версии 2, так как пакет отслеживает все версии пакетов msix. Выполнив выгрузку версии Asset. msix до версии 2, вам потребуется новый msixbundle с этой новой ссылкой. Версия 2. msixbundle может содержать ссылки на версии v1 x86. msix и x64. msix; msix пакеты неструктурированного пакета не обязательно должны иметь одинаковый номер версии.  
